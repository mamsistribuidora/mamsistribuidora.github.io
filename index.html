<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MAM Distribuidora | Oficial</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #D4AF37; --blue: #00BFFF; --bg: #000; --card: #111; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; }
        
        body { background: var(--bg); color: #fff; min-height: 100vh; display: flex; flex-direction: column; overflow-x: hidden; }

        /* FUNDO E RODAP√â FIXOS */
        #app { display: flex; flex: 1; flex-direction: column; }
        @media (min-width: 768px) {
            #app { display: grid; grid-template-columns: 280px 1fr; }
            aside { display: flex !important; }
            .mobile-nav { display: none !important; }
        }

        aside { background: #080808; border-right: 1px solid #222; padding: 25px; flex-direction: column; display: none; height: 100vh; position: sticky; top: 0; }
        main { flex: 1; padding: 20px; padding-bottom: 120px; overflow-y: auto; }

        .logo-circle { width: 70px; height: 70px; border: 3px solid var(--gold); border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-weight: 900; color: var(--gold); }

        .mam-box { background: var(--card); padding: 20px; border-radius: 15px; border: 1px solid #222; margin-bottom: 20px; width: 100%; }
        input, select, textarea { width: 100%; padding: 12px; margin: 8px 0; background: #000; border: 1px solid #333; color: #fff; border-radius: 10px; }
        .btn-gold { width: 100%; padding: 14px; background: var(--gold); color: #000; border: none; border-radius: 10px; font-weight: 800; cursor: pointer; text-transform: uppercase; }

        /* NAVEGA√á√ÉO */
        .nav-item { padding: 12px; color: #888; cursor: pointer; border-radius: 10px; margin-bottom: 5px; display: flex; align-items: center; gap: 10px; transition: 0.3s; font-size: 14px; }
        .nav-item:hover, .active { background: rgba(212, 175, 55, 0.1); color: var(--gold); font-weight: 600; }

        .mobile-nav { position: fixed; bottom: 0; width: 100%; background: #080808; display: flex; justify-content: space-around; padding: 10px; border-top: 2px solid var(--gold); z-index: 4000; }
        .mobile-item { color: #888; text-align: center; font-size: 10px; cursor: pointer; }
        .mobile-item.active { color: var(--gold); }

        footer { padding: 15px; text-align: center; color: var(--gold); font-size: 11px; font-weight: bold; border-top: 1px solid #222; background: #000; width: 100%; }
        .hidden { display: none !important; }

        /* LISTA DE M√öSICAS */
        .track-card { display: flex; align-items: center; gap: 15px; padding: 12px; border-bottom: 1px solid #222; }
    </style>
</head>
<body>

<div id="authArea" style="position:fixed; inset:0; background:#000; z-index:5000; display:flex; align-items:center; justify-content:center;">
    <div class="mam-box" style="max-width:360px; text-align:center; border:1px solid var(--gold);">
        <div class="logo-circle">MAM</div>
        <h2 id="authT">LOGIN HQ</h2>
        <input type="email" id="email" placeholder="E-mail">
        <input type="password" id="pass" placeholder="Senha">
        <button class="btn-gold" onclick="autenticar()" id="btnA">Entrar</button>
        <p onclick="toggleA()" style="margin-top:15px; cursor:pointer; font-size:0.8rem;">Novo artista? <b style="color:var(--gold)">Cadastrar-se</b></p>
    </div>
</div>

<div id="app" class="hidden">
    <aside>
        <div class="logo-circle">MAM</div>
        <div class="nav-item active" onclick="tab('Home', this)">üè† In√≠cio</div>
        <div class="nav-item" onclick="tab('Musicas', this)">üéµ Minhas M√∫sicas</div>
        <div class="nav-item" onclick="tab('Lancar', this)">üì§ Lan√ßar M√∫sica</div>
        <div class="nav-item" onclick="tab('Cart', this)">üí∞ Carteira</div>
        <div class="nav-item" onclick="tab('Perfil', this)">üë§ Perfil</div>
        <div class="nav-item hidden" id="admBtn" onclick="tab('Admin', this)">üëî Painel CEO</div>
        <div style="margin-top:auto; color:red; cursor:pointer; font-size:12px; text-align:center;" onclick="sair()">SAIR DA CONTA</div>
    </aside>

    <main>
        <div id="pHome" class="aba">
            <h2 style="color:var(--gold)">Feed de Lan√ßamentos</h2>
            <div class="mam-box" id="globalFeed">
                <p style="font-size:0.8rem; color:#666;">Novidades da MAM Distribuidora aparecer√£o aqui.</p>
            </div>
            <h3 style="color:var(--gold)">Tarefas de Lucro</h3>
            <div class="mam-box">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <span>üì∫ Assistir V√≠deo (30s)</span>
                    <button class="btn-gold" style="width:80px; padding:5px" onclick="ganhar(500)">+500</button>
                </div>
            </div>
        </div>

        <div id="pMusicas" class="aba hidden">
            <h2 style="color:var(--gold)">Minha Galeria</h2>
            <div class="mam-box" id="myTracks">
                <p style="font-size:0.8rem; color:#666;">Ainda n√£o lan√ßaste m√∫sicas nesta conta.</p>
            </div>
        </div>

        <div id="pLancar" class="aba hidden">
            <div class="mam-box">
                <h3 style="color:var(--gold)">Novo Lan√ßamento</h3>
                <input type="text" placeholder="T√≠tulo da Obra">
                <input type="text" placeholder="Artista Principal">
                <input type="text" placeholder="Feat (Colaboradores)">
                <select><option>Diversos</option><option>Rap</option><option>Kizomba</option></select>
                <label>Data</label><input type="date">
                <label>Capa</label><input type="file">
                <label>√Åudio</label><input type="file">
                <button class="btn-gold" onclick="alert('Enviado para curadoria de Matias Manuel')">PUBLICAR AGORA</button>
            </div>
        </div>

        <div id="pCart" class="aba hidden">
            <div class="mam-box" style="border-left:5px solid var(--gold)">
                <p>SALDO ACUMULADO</p>
                <h1 id="sBig" style="color:var(--gold); font-size:3rem;">0,00 Kz</h1>
            </div>
            <div class="mam-box">
                <h3>Sacar para BFA/BAI</h3>
                <input type="text" placeholder="Teu IBAN">
                <button class="btn-gold">Pedir Transfer√™ncia</button>
            </div>
        </div>
    </main>

    <div class="mobile-nav">
        <div class="mobile-item active" onclick="tab('Home', this)">üè†<br>In√≠cio</div>
        <div class="mobile-item" onclick="tab('Musicas', this)">üéµ<br>M√∫sicas</div>
        <div class="mobile-item" onclick="tab('Lancar', this)">üì§<br>Lan√ßar</div>
        <div class="mobile-item" onclick="tab('Cart', this)">üí∞<br>Saldo</div>
    </div>

    <footer>MAM DISTRIBUIDORA | CEO MATIAS ARS√âNIO MANUEL</footer>
</div>

<script>
    const cfg = { apiKey: "AIzaSyBBsZS8EpszUtikaKS8B5te8C7Q9Ow-9wo", authDomain: "mam-distribuidora.firebaseapp.com", projectId: "mam-distribuidora", storageBucket: "mam-distribuidora.appspot.com", messagingSenderId: "670857002452", appId: "1:670857002452:web:404822b5376075e520ea41" };
    firebase.initializeApp(cfg);
    const auth = firebase.auth(), db = firebase.firestore();

    let isL = true;
    function toggleA() { 
        isL = !isL; 
        document.getElementById('authT').innerText = isL ? "LOGIN HQ" : "REGISTO";
        document.getElementById('btnA').innerText = isL ? "Entrar" : "Cadastrar";
    }

    async function autenticar() {
        const e = document.getElementById('email').value, p = document.getElementById('pass').value;
        try {
            if(isL) await auth.signInWithEmailAndPassword(e, p);
            else {
                const r = await auth.createUserWithEmailAndPassword(e, p);
                await db.collection("users").doc(r.user.uid).set({ email: e, saldo: 0 });
            }
        } catch(err) { alert(err.message); }
    }

    auth.onAuthStateChanged(u => {
        if(u) {
            document.getElementById('authArea').classList.add('hidden');
            document.getElementById('app').classList.remove('hidden');
            if(u.email === "mamfilhos29@gmail.com") document.getElementById('admBtn').classList.remove('hidden');
            db.collection("users").doc(u.uid).onSnapshot(d => {
                document.getElementById('sBig').innerText = d.data().saldo.toLocaleString() + ",00 Kz";
            });
        }
    });

    async function ganhar(v) {
        alert("Tarefa iniciada...");
        await db.collection("users").doc(auth.currentUser.uid).update({ saldo: firebase.firestore.FieldValue.increment(v) });
    }

    function tab(id, el) {
        document.querySelectorAll('.aba').forEach(a => a.classList.add('hidden'));
        document.getElementById('p' + id).classList.remove('hidden');
        document.querySelectorAll('.nav-item, .mobile-item').forEach(n => n.classList.remove('active'));
        if(el) el.classList.add('active');
    }

    function sair() { auth.signOut(); location.reload(); }
</script>
</body>
</html>
