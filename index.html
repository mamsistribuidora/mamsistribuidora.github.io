<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAM Distribuidora | HQ CEO</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #D4AF37; --blue: #00BFFF; --bg: #050505; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; }
        
        body { 
            background: var(--bg); color: #fff; height: 100vh; overflow: hidden;
            background-image: linear-gradient(rgba(0,0,0,0.9), rgba(0,0,0,0.9)), url('https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
        }

        .hidden { display: none !important; }

        /* DESIGN DE ELITE */
        #app { display: grid; grid-template-columns: 280px 1fr; height: 100vh; }
        aside { background: rgba(0,0,0,0.98); border-right: 1px solid #222; padding: 30px 15px; display: flex; flex-direction: column; }
        main { overflow-y: auto; padding: 40px; padding-bottom: 120px; }

        .logo-circle { width: 90px; height: 90px; border: 4px solid var(--gold); border-radius: 50%; margin: 0 auto 25px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: 900; color: var(--gold); background: #000; box-shadow: 0 0 20px rgba(212, 175, 55, 0.2); }

        .nav-item { padding: 15px; color: #888; cursor: pointer; border-radius: 12px; margin-bottom: 8px; display: flex; align-items: center; gap: 12px; transition: 0.3s; }
        .nav-item:hover, .active { background: rgba(212, 175, 55, 0.1); color: var(--gold); }

        .mam-box { background: rgba(15,15,15,0.95); padding: 30px; border-radius: 20px; border: 1px solid #333; margin-bottom: 25px; }
        .btn-gold { width: 100%; padding: 15px; background: var(--gold); color: #000; border: none; border-radius: 10px; font-weight: 800; cursor: pointer; text-transform: uppercase; }
        
        footer { position: fixed; bottom: 0; left: 280px; right: 0; padding: 20px; background: #000; border-top: 1px solid var(--gold); text-align: center; color: var(--gold); font-weight: bold; font-size: 0.8rem; letter-spacing: 1px; }
    </style>
</head>
<body>

<div id="authArea" style="height:100vh; display:flex; align-items:center; justify-content:center; background:#000; position:fixed; width:100%; z-index:1000;">
    <div style="background:#111; padding:40px; border-radius:25px; border:2px solid var(--gold); width:90%; max-width:400px; text-align:center;">
        <div class="logo-circle">MAM</div>
        <h2 style="color:var(--gold); margin-bottom:20px;">ENTRADA HQ</h2>
        <input type="email" id="email" placeholder="Email" style="width:100%; padding:12px; margin:10px 0; background:#000; border:1px solid #444; color:#fff; border-radius:8px;">
        <input type="password" id="pass" placeholder="Senha" style="width:100%; padding:12px; margin:10px 0; background:#000; border:1px solid #444; color:#fff; border-radius:8px;">
        <button class="btn-gold" onclick="autenticar()">Aceder ao Painel</button>
    </div>
</div>

<div id="app" class="hidden">
    <aside>
        <div class="logo-circle" style="transform: scale(0.75);">MAM</div>
        <div class="nav-item active" onclick="showTab('Home', this)">üè† In√≠cio & Convite</div>
        <div class="nav-item" onclick="showTab('Perfil', this)">üë§ Perfil</div>
        <div class="nav-item" onclick="showTab('Lancar', this)">üì§ Lan√ßar M√∫sica</div>
        <div class="nav-item" onclick="showTab('Cart', this)">üí∞ Carteira</div>
        <div class="nav-item hidden" id="admBtn" onclick="showTab('Admin', this)">üëî Finan√ßas CEO</div>
        <div style="margin-top:auto; padding:15px; color:#ff4d4d; cursor:pointer; font-weight:bold; border:1px solid #333; text-align:center; border-radius:10px;" onclick="sair()">SAIR</div>
    </aside>

    <main>
        <div id="tabHome" class="content-tab">
            <h2 style="color:var(--gold); margin-bottom:20px;">Plano de Expans√£o MAM</h2>
            <div class="mam-box" style="border-color:var(--blue)">
                <h3 style="color:var(--blue)">üîó O TEU LINK DE CRESCIMENTO</h3>
                <p style="font-size:0.85rem; margin:10px 0;">Convida um artista: Tu ganhas **500 Kz** e a MAM cresce!</p>
                <input type="text" id="refLink" readonly style="width:100%; padding:12px; background:#000; border:1px solid var(--blue); color:var(--blue); font-weight:bold; border-radius:8px;">
                <button class="btn-gold" style="background:var(--blue); color:white; margin-top:15px;" onclick="copiar()">COPIAR E GANHAR</button>
            </div>
        </div>

        <div id="tabCart" class="content-tab hidden">
            <div class="mam-box" style="border-left:8px solid var(--gold);">
                <p>SALDO EM CARTEIRA</p>
                <h1 id="sBig" style="font-size:4rem; color:var(--gold)">0,00 Kz</h1>
            </div>
            <div class="mam-box">
                <h3>SOLICITAR SAQUE</h3>
                <select style="width:100%; padding:12px; margin:10px 0; background:#000; color:#fff; border-radius:8px;"><option>IBAN ANGOLA</option><option>PAYPAL</option></select>
                <button class="btn-gold">Confirmar Levantamento</button>
            </div>
        </div>

        <div id="tabAdmin" class="content-tab hidden">
            <h2 style="color:var(--gold)">CENTRAL DE INVESTIMENTO CEO</h2>
            <div class="mam-box" style="background: linear-gradient(45deg, #111, #000); border: 1px solid var(--gold);">
                <h3>üí∞ FUNDO DE PROPAGANDA (EMPR√âSTIMO)</h3>
                <p style="font-size: 0.9rem; color: #888;">Valor injetado pelo Sat√©lite para marketing.</p>
                <h1 style="color:var(--gold); font-size: 3rem;">200.000,00 Kz</h1>
                <p style="margin-top:10px; font-size: 0.7rem;">*O desconto ser√° feito automaticamente sobre as comiss√µes de 5.000 Kz por registo.</p>
            </div>
        </div>
    </main>
    <footer>MAM DISTRIBUIDORA | PROPRIEDADE DE MATIAS ARS√âNIO MANUEL</footer>
</div>

<script>
    const cfg = { apiKey: "AIzaSyBBsZS8EpszUtikaKS8B5te8C7Q9Ow-9wo", authDomain: "mam-distribuidora.firebaseapp.com", projectId: "mam-distribuidora", storageBucket: "mam-distribuidora.appspot.com", messagingSenderId: "670857002452", appId: "1:670857002452:web:404822b5376075e520ea41" };
    firebase.initializeApp(cfg);
    const auth = firebase.auth(), db = firebase.firestore();

    async function autenticar() {
        const e = document.getElementById('email').value, p = document.getElementById('pass').value;
        try { await auth.signInWithEmailAndPassword(e, p); } catch(err) { alert("Acesso Negado"); }
    }

    auth.onAuthStateChanged(u => {
        if(u) {
            document.getElementById('authArea').classList.add('hidden');
            document.getElementById('app').classList.remove('hidden');
            document.getElementById('refLink').value = "https://mam.net/join?ref=" + u.uid;
            
            const isCEO = u.email === "mamfilhos29@gmail.com";
            if(isCEO) {
                document.getElementById('admBtn').classList.remove('hidden');
                // Inje√ß√£o do Empr√©stimo de 200.000 Kz no primeiro acesso do CEO
                db.collection("users").doc(u.uid).update({ 
                    saldo: firebase.firestore.FieldValue.increment(200000),
                    fundoPropaganda: 200000 
                });
            }
            
            db.collection("users").doc(u.uid).onSnapshot(d => {
                document.getElementById('sBig').innerText = d.data().saldo.toLocaleString('pt-PT') + ",00 Kz";
            });
        }
    });

    function showTab(id, el) {
        document.querySelectorAll('.content-tab').forEach(t => t.classList.add('hidden'));
        document.getElementById('tab' + id).classList.remove('hidden');
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        el.classList.add('active');
    }

    function copiar() { const i = document.getElementById('refLink'); i.select(); document.execCommand('copy'); alert("Link copiado! Ganha 500 Kz por cada amigo."); }
    function sair() { auth.signOut(); location.reload(); }
</script>
</body>
</html>
