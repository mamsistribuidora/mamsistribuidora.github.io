<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAM Distribuidora | Plataforma Oficial</title>
    <style>
        :root { --gold: #FFD700; --blue: #002d5a; --card: rgba(0, 0, 0, 0.95); }
        body { 
            font-family: 'Segoe UI', sans-serif; margin: 0; min-height: 100vh; color: #fff;
            background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('https://images.unsplash.com/photo-1598488035139-bdbb2231ce04?auto=format&fit=crop&w=1470&q=80'); 
            background-size: cover; background-attachment: fixed; background-position: center;
        }
        .sidebar { width: 280px; background: #000; height: 100vh; position: fixed; border-right: 2px solid var(--blue); display: none; flex-direction: column; padding: 20px; box-sizing: border-box; z-index: 1000; overflow-y: auto; }
        .main { width: 100%; box-sizing: border-box; transition: 0.3s; }
        .logged-main { padding-left: 280px; }
        @media (max-width: 900px) { .logged-main { padding-left: 0; } .sidebar { width: 100%; height: auto; position: relative; } }
        .section { padding: 25px; display: none; max-width: 1200px; margin: auto; }
        .active-section { display: block; }
        .card { background: var(--card); padding: 20px; border-radius: 12px; border: 1px solid #333; margin-bottom: 20px; border-left: 4px solid var(--gold); }
        input, select { width: 100%; padding: 12px; margin: 8px 0; background: #111; border: 1px solid var(--gold); color: #fff; border-radius: 6px; }
        .btn-gold { background: var(--gold); color: #000; padding: 14px; border: none; border-radius: 6px; font-weight: bold; width: 100%; cursor: pointer; text-transform: uppercase; margin-top: 10px; }
        .nav-item { padding: 14px; cursor: pointer; border-bottom: 1px solid #222; }
        .profile-pic { width: 100px; height: 100px; border-radius: 50%; border: 3px solid var(--gold); object-fit: cover; display: block; margin: auto; background: #222; }
        .pacote-card { border: 1px solid #444; padding: 15px; border-radius: 8px; text-align: center; background: rgba(255,215,0,0.05); }
        .hidden { display: none !important; }
        footer { background: #000; padding: 30px; text-align: center; border-top: 2px solid var(--blue); }
    </style>
</head>
<body>

    <div id="authPage" style="height:95vh; display:flex; align-items:center; justify-content:center; padding:20px;">
        <div class="card" style="width:100%; max-width:400px; text-align:center;">
            <h1 style="color:var(--gold); font-size:3em; margin:0;">MAM</h1>
            <div id="loginBox">
                <input type="email" id="lEmail" placeholder="Teu E-mail">
                <input type="password" id="lPass" placeholder="Senha">
                <button class="btn-gold" onclick="entrar()">Iniciar Sess√£o</button>
                <p onclick="irRegisto()" style="color:var(--gold); cursor:pointer; margin-top:15px;">Criar Conta Profissional</p>
            </div>
            <div id="regBox" class="hidden">
                <input type="text" id="rNome" placeholder="Nome Completo">
                <input type="email" id="rEmail" placeholder="E-mail">
                <input type="password" id="rPass" placeholder="Criar Senha">
                <button class="btn-gold" onclick="cadastrar()">Registrar e Ganhar 5.000 KZ</button>
                <p onclick="irLogin()" style="color:var(--gold); cursor:pointer; margin-top:15px;">J√° tenho conta</p>
            </div>
        </div>
    </div>

    <nav id="sidebar" class="sidebar">
        <div style="text-align:center; margin-bottom:20px;">
            <label for="upFotoInput" style="cursor:pointer;">
                <img id="sidePic" src="https://via.placeholder.com/100" class="profile-pic">
            </label>
            <p id="sideNome" style="color:var(--gold); font-weight:bold; margin-top:12px;"></p>
        </div>
        <div class="nav-item" onclick="show('home')">üè† In√≠cio / Home</div>
        <div class="nav-item" onclick="show('perfil')">üë§ Editar Perfil</div>
        <div class="nav-item" onclick="show('lancar')">üöÄ Lan√ßamento Profissional</div>
        <div class="nav-item" onclick="show('minhas_musicas')">üé∂ Minhas M√∫sicas</div>
        <div class="nav-item" onclick="show('carteira')">üí∞ Carteira Dupla</div>
        <div id="adminBtn" class="nav-item" onclick="show('admin')" style="display:none; color:var(--gold); border: 1px solid var(--gold);">üõ°Ô∏è PAINEL CEO (MAM)</div>
        <div class="nav-item" onclick="sair()" style="color:#ff4d4d; margin-top:20px;">üö™ Sair</div>
    </nav>

    <div id="app" class="hidden">
        <div id="mainDiv" class="main">
            
            <div id="home" class="section active-section">
                <div class="card">
                    <h3>Bem-vindo √† MAM</h3>
                    <p>Ol√°, <span id="userNomeBoas"></span>! Curadoria independente para o teu sucesso.</p>
                </div>

                <div class="card">
                    <h3>üìÄ M√∫sica em Destaque</h3>
                    <p><b>F√© em Deus</b> - Princesa Heliany ft Play Sean Ars√©nio</p>
                </div>

                <div class="card">
                    <h3>üöÄ Ganhar Dinheiro (Tarefas Reais)</h3>
                    <button class="btn-gold" style="font-size:0.8em; width:auto; padding:10px;" onclick="addSaldo(100, 'V√≠deo Assistido')">üìπ Assistir V√≠deo (+100 KZ)</button>
                    <button class="btn-gold" style="font-size:0.8em; width:auto; padding:10px;" onclick="addSaldo(200, 'Seguiu TikTok')">üì± Seguir TikTok C.E.O (+200 KZ)</button>
                </div>

                <div class="card">
                    <h3>üì¶ Pacotes e Benef√≠cios (Escolha o seu N√≠vel)</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap:10px;">
                        <div class="pacote-card"><b>GR√ÅTIS</b><br><small>20% Lucro</small><button class="btn-gold" style="padding:5px; font-size:0.7em;">Ativo</button></div>
                        <div class="pacote-card" style="border-color:var(--gold)"><b>PREMIUM</b><br><small>80% Lucro</small><button class="btn-gold" style="padding:5px; font-size:0.7em;" onclick="pagarPacote(15000)">15.000 KZ</button></div>
                    </div>
                </div>

                <div class="card" style="border-left:4px solid var(--blue);">
                    <h3>üì¢ Apoio ao Projeto (Contas Banc√°rias)</h3>
                    <p><b>IBAN BAI:</b> AO06 0040 0000 1234 5678 1012 3<br><b>Titular:</b> Matias Ars√©nio Manuel</p>
                </div>
            </div>

            <div id="perfil" class="section">
                <div class="card">
                    <h3>Gerir Perfil</h3>
                    <p>Carregar Foto do Dispositivo:</p>
                    <input type="file" id="upFotoInput" accept="image/*" onchange="processarFoto(this)">
                    <p>Nome Art√≠stico:</p>
                    <input type="text" id="editNome" placeholder="Mudar nome">
                    <button class="btn-gold" onclick="salvarPerfil()">Atualizar Perfil</button>
                </div>
            </div>

            <div id="lancar" class="section">
                <div class="card">
                    <h3>Lan√ßamento Profissional</h3>
                    <input type="text" id="mTit" placeholder="T√≠tulo da M√∫sica">
                    <select id="mCat"><option>Kizomba</option><option>Rap</option><option>Gospel</option></select>
                    <p>Capa e √Åudio:</p>
                    <input type="file" multiple>
                    <button class="btn-gold" onclick="enviarMusica()">Enviar para Distribui√ß√£o</button>
                </div>
            </div>

            <div id="minhas_musicas" class="section">
                <h3>Minhas M√∫sicas</h3>
                <div id="listaMusicas"></div>
            </div>

            <div id="carteira" class="section">
                <div class="card">
                    <small>Teu Saldo Artista:</small>
                    <h1 id="sArtista" style="color:var(--gold); font-size:3em;">0 KZ</h1>
                </div>
                <div id="cardCEO" class="card" style="display:none; background:var(--blue);">
                    <small>Lucro Empresa MAM (80%):</small>
                    <h1 id="sCEO" style="color:#fff; font-size:2em;">0 KZ</h1>
                </div>
                <div class="card">
                    <h3>Levantamento Real</h3>
                    <select id="saqueMetodo">
                        <option>BAI</option><option>BFA</option><option>Express</option><option>PayPal</option><option>Wise</option><option>Pix</option>
                    </select>
                    <input type="number" id="saqueValor" placeholder="Valor a sacar">
                    <button class="btn-gold" onclick="sacar()">Confirmar Saque</button>
                </div>
            </div>

            <div id="admin" class="section">
                <div class="card"><h3>Gest√£o de Dire√ß√£o</h3><p>Matias, aqui controlas todos os pagamentos e artistas.</p></div>
            </div>

        </div>
        <footer><b>MAM DISTRIBUIDORA</b> | C.E.O Matias Ars√©nio Manuel | Luanda, 2026</footer>
    </div>

    <script>
        const CEO_MAIL = "mamfilhos29@gmail.com";
        let usuarios = JSON.parse(localStorage.getItem('mam_db_vFinal')) || [];
        let sessao = JSON.parse(localStorage.getItem('mam_sess_vFinal')) || null;
        let musicas = JSON.parse(localStorage.getItem('mam_musicas_vFinal')) || [];
        let lucroMAM = Number(localStorage.getItem('mam_lucro_ceo')) || 2500000;

        function irRegisto() { document.getElementById('loginBox').classList.add('hidden'); document.getElementById('regBox').classList.remove('hidden'); }
        function irLogin() { document.getElementById('regBox').classList.add('hidden'); document.getElementById('loginBox').classList.remove('hidden'); }

        function cadastrar() {
            const n = document.getElementById('rNome').value, e = document.getElementById('rEmail').value, p = document.getElementById('rPass').value;
            if(!n || !e || !p) return alert("Preencha tudo!");
            usuarios.push({nome: n, email: e, pass: p, saldo: 5000, foto: ""});
            localStorage.setItem('mam_db_vFinal', JSON.stringify(usuarios));
            alert("Bem-vindo √† MAM! Ganhaste 5.000 KZ de b√≥nus."); irLogin();
        }

        function entrar() {
            const e = document.getElementById('lEmail').value, p = document.getElementById('lPass').value;
            if(e === CEO_MAIL) {
                sessao = {nome: "Matias CEO", email: e, role: "ADMIN", saldo: 500000, foto: ""};
            } else {
                let u = usuarios.find(x => x.email === e && x.pass === p);
                if(!u) return alert("Dados incorretos!");
                sessao = u;
            }
            localStorage.setItem('mam_sess_vFinal', JSON.stringify(sessao));
            location.reload();
        }

        function bootstrap() {
            if(!sessao) return;
            document.getElementById('authPage').classList.add('hidden');
            document.getElementById('app').classList.remove('hidden');
            document.getElementById('sidebar').style.display = 'flex';
            document.getElementById('mainDiv').classList.add('logged-main');
            
            document.getElementById('sideNome').innerText = sessao.nome;
            document.getElementById('userNomeBoas').innerText = sessao.nome;
            if(sessao.foto) document.getElementById('sidePic').src = sessao.foto;
            
            updateSaldos();
            renderMusicas();

            if(sessao.role === "ADMIN") {
                document.getElementById('adminBtn').style.display = 'block';
                document.getElementById('cardCEO').style.display = 'block';
            }
        }

        function updateSaldos() {
            document.getElementById('sArtista').innerText = sessao.saldo.toLocaleString() + " KZ";
            document.getElementById('sCEO').innerText = lucroMAM.toLocaleString() + " KZ";
        }

        function addSaldo(qtd, motivo) {
            sessao.saldo += qtd;
            lucroMAM += (qtd * 0.8); // Empresa ganha 80% sobre movimenta√ß√£o de tarefas
            alert("Sucesso: +" + qtd + " KZ por " + motivo);
            save();
        }

        function pagarPacote(valor) {
            if(sessao.saldo < valor) return alert("Saldo insuficiente. Fa√ßa tarefas ou carregue a conta.");
            sessao.saldo -= valor;
            lucroMAM += valor;
            alert("Pacote Premium Ativado! Agora ganhas 80% nas tuas m√∫sicas.");
            save();
        }

        function processarFoto(input) {
            if (input.files && input.files[0]) {
                let reader = new FileReader();
                reader.onload = function(e) {
                    sessao.foto = e.target.result;
                    document.getElementById('sidePic').src = e.target.result;
                    save();
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function enviarMusica() {
            const t = document.getElementById('mTit').value;
            if(!t) return alert("Qual o t√≠tulo?");
            musicas.push({titulo: t, dono: sessao.email, status: "Em Distribui√ß√£o"});
            localStorage.setItem('mam_musicas_vFinal', JSON.stringify(musicas));
            alert("M√∫sica enviada com sucesso!");
            renderMusicas();
            show('minhas_musicas');
        }

        function renderMusicas() {
            const lista = document.getElementById('listaMusicas');
            let minhas = musicas.filter(m => m.dono === sessao.email);
            lista.innerHTML = minhas.map(m => `<div class="card"><b>${m.titulo}</b><br><small>Status: ${m.status}</small></div>`).join('');
        }

        function sacar() {
            const v = Number(document.getElementById('saqueValor').value
