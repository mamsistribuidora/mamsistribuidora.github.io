<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAM Distribuidora | Oficial</title>
    <style>
        :root { --gold: #FFD700; --blue: #002d5a; --black: #050505; --card: rgba(20, 20, 20, 0.98); --text: #ffffff; }
        
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('https://images.unsplash.com/photo-1514525253361-bee87380cf40?q=80&w=1470&auto=format&fit=crop'); 
            background-size: cover; background-attachment: fixed; color: var(--text); margin: 0; min-height: 100vh;
        }

        /* NAVEGA√á√ÉO */
        .sidebar { width: 280px; background: #000; height: 100vh; position: fixed; border-right: 2px solid var(--blue); display: none; flex-direction: column; padding: 20px; box-sizing: border-box; z-index: 1000; }
        .main { width: 100%; box-sizing: border-box; }
        .logged-main { padding-left: 280px; }

        @media (max-width: 900px) {
            .logged-main { padding-left: 0; }
            .sidebar { width: 100%; height: auto; position: relative; display: none !important; }
            .sidebar.mobile-open { display: flex !important; }
        }

        /* COMPONENTES */
        .section { padding: 30px; display: none; max-width: 1000px; margin: auto; animation: fadeIn 0.3s; }
        .active-section { display: block; }
        .card { background: var(--card); padding: 25px; border-radius: 12px; border-left: 5px solid var(--gold); margin-bottom: 20px; }
        
        input, select, textarea { width: 100%; padding: 12px; margin: 8px 0; background: #111; border: 1px solid #444; color: #fff; border-radius: 6px; box-sizing: border-box; }
        .btn-gold { background: var(--gold); color: #000; padding: 14px; border: none; border-radius: 8px; font-weight: bold; width: 100%; cursor: pointer; text-transform: uppercase; margin-top: 10px; }
        
        .nav-item { padding: 12px; border-radius: 8px; cursor: pointer; margin-bottom: 5px; display: flex; align-items: center; gap: 10px; }
        .nav-item:hover, .active-nav { background: var(--blue); color: var(--gold); }

        .profile-img { width: 80px; height: 80px; border-radius: 50%; border: 2px solid var(--gold); object-fit: cover; margin: 0 auto; display: block; }
        footer { background: #000; padding: 20px; text-align: center; font-size: 0.8em; color: #777; border-top: 1px solid #222; }
        .hidden { display: none !important; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <nav id="sidebar" class="sidebar">
        <div style="text-align:center; margin-bottom:30px;">
            <img id="userImg" src="https://via.placeholder.com/80" class="profile-img">
            <p id="userName" style="color:var(--gold); font-weight:bold; margin-top:10px;">Matias MAM</p>
        </div>
        <div class="nav-item active-nav" onclick="showSec('home', this)">üè† In√≠cio</div>
        <div class="nav-item" onclick="showSec('perfil', this)">üë§ Editar Perfil</div>
        <div class="nav-item" onclick="showSec('lancar', this)">üöÄ Lan√ßar M√∫sica</div>
        <div class="nav-item" onclick="showSec('carteira', this)">üí∞ Carteira Dupla</div>
        <div class="nav-item" onclick="showSec('satelite', this)">üõ∞Ô∏è MAM Sat√©lite (Auto)</div>
        <div id="adminBtn" class="nav-item" onclick="showSec('admin', this)" style="display:none; color:var(--gold); border:1px solid var(--gold);">üõ°Ô∏è ADMIN</div>
        <div class="nav-item" onclick="logout()" style="color:#ff4d4d; margin-top:auto;">üö™ Sair</div>
    </nav>

    <div id="mainContent" class="main">
        
        <div id="authPage" style="height:100vh; display:flex; align-items:center; justify-content:center; padding:20px;">
            <div class="card" style="width:100%; max-width:400px; text-align:center;">
                <h1 style="color:var(--gold); margin:0;">MAM</h1>
                <p style="font-size:0.8em; color:#888; margin-bottom:25px;">SISTEMA DE GEST√ÉO MUSICAL</p>
                
                <div id="loginForm">
                    <input type="email" id="lEmail" placeholder="Seu Email">
                    <input type="password" id="lPass" placeholder="Sua Senha">
                    <button class="btn-gold" onclick="execLogin()">Entrar no Sistema</button>
                    <p style="font-size:0.9em; margin-top:20px;">N√£o tem conta? <br>
                        <a href="javascript:void(0)" onclick="mostrarRegisto()" style="color:var(--gold); font-weight:bold;">Criar Conta Agora</a>
                    </p>
                </div>

                <div id="registerForm" class="hidden">
                    <input type="text" id="rNome" placeholder="Nome Completo">
                    <input type="email" id="rEmail" placeholder="Email para Registo">
                    <input type="password" id="rPass" placeholder="Escolha uma Senha">
                    <button class="btn-gold" onclick="execRegisto()">Finalizar e Ganhar 5.000 KZ</button>
                    <p style="font-size:0.9em; margin-top:20px;">J√° tem conta? <br>
                        <a href="javascript:void(0)" onclick="mostrarLogin()" style="color:var(--gold); font-weight:bold;">Voltar ao Login</a>
                    </p>
                </div>
            </div>
        </div>

        <div id="app" class="hidden">
            
            <div id="home" class="section active-section">
                <h2>Novidades MAM</h2>
                <div class="card">
                    <p>üíø <b>Lan√ßamento:</b> F√© em Deus - P. Heliany ft Play Sean Ars√©nio</p>
                    <p>Status: Ativo em 150 plataformas.</p>
                </div>
            </div>

            <div id="perfil" class="section">
                <h2>Editar Perfil Profissional</h2>
                <div class="card">
                    <div style="text-align:center; margin-bottom:15px;">
                        <img id="perfilPreview" src="https://via.placeholder.com/100" class="profile-img" style="width:100px; height:100px;">
                        <input type="file" accept="image/*" onchange="upFoto(this)" style="margin-top:10px;">
                    </div>
                    <input type="text" id="upNome" placeholder="Novo Nome de Artista">
                    <input type="text" id="upIban" placeholder="Seu IBAN (Angola ou Online)">
                    <button class="btn-gold" onclick="salvarP()">Guardar Altera√ß√µes</button>
                </div>
            </div>

            <div id="lancar" class="section">
                <h2>Lan√ßamento Profissional (ISRC/UPC)</h2>
                <div class="card">
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                        <input type="text" placeholder="T√≠tulo da M√∫sica">
                        <input type="text" placeholder="Artista Principal">
                        <input type="text" placeholder="Compositor">
                        <select>
                            <option>Kizomba</option><option>Rap</option><option>Gospel</option>
                        </select>
                        <input type="date">
                        <input type="text" placeholder="UPC (Opcional)">
                    </div>
                    <p>Capa do √Ålbum:</p> <input type="file">
                    <p>Ficheiro de √Åudio:</p> <input type="file">
                    <button class="btn-gold">Submeter para Curadoria MAM</button>
                </div>
            </div>

            <div id="carteira" class="section">
                <h2>Gest√£o de Lucros 20/80</h2>
                <div class="card">
                    <small>Seu Saldo Pessoal:</small>
                    <h1 id="sUser" style="color:var(--gold); margin:10px 0;">0 KZ</h1>
                </div>
                <div id="cardAdmin" class="card" style="display:none; background:var(--blue);">
                    <small>Lucro Empresa (MAM Admin):</small>
                    <h1 id="sEmpresa" style="margin:10px 0;">0 KZ</h1>
                </div>
                <button class="btn-gold">Solicitar Levantamento (BAI/BFA/Express)</button>
            </div>

            <div id="satelite" class="section">
                <h2>üõ∞Ô∏è Ganhos Sat√©lite (MAM Cloud)</h2>
                <div class="card" style="text-align:center;">
                    <p>Ferramentas autom√°ticas em execu√ß√£o...</p>
                    <h2 id="minando" style="color:var(--gold)">0.00 KZ</h2>
                    <small>Ganhos distribu√≠dos automaticamente vindo do servidor.</small>
                </div>
            </div>

            <div id="admin" class="section">
                <h2>
