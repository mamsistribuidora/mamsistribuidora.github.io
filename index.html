<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAM Distribuidora | Oficial</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <style>
        :root { --gold: #D4AF37; --dark: #050505; --gray: #121212; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--dark); color: #fff; min-height: 100vh; display: flex; flex-direction: column; }
        .hidden { display: none !important; }

        /* RESPONSIVIDADE TOTAL */
        .wrapper { display: flex; flex-direction: column; flex: 1; }
        @media (min-width: 992px) {
            .wrapper { flex-direction: row; }
            .sidebar { width: 280px; display: block !important; position: sticky; top: 0; height: 100vh; }
            .mobile-nav { display: none; }
        }

        /* SIDEBAR & NAV */
        .sidebar { background: #000; border-right: 1px solid #222; padding: 25px; display: none; }
        .mobile-nav { background: #000; padding: 15px; border-bottom: 1px solid var(--gold); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; }
        .logo-mam { width: 60px; height: 60px; border-radius: 50%; border: 2px solid var(--gold); display: inline-flex; align-items: center; justify-content: center; color: var(--gold); font-weight: bold; box-shadow: 0 0 10px var(--gold); margin-bottom: 10px; }

        /* AUTH CARDS */
        .auth-card { max-width: 400px; margin: 40px auto; padding: 30px; background: #000; border: 1px solid var(--gold); border-radius: 20px; width: 90%; text-align: center; }
        input, select, textarea { width: 100%; padding: 12px; margin: 8px 0; background: #111; border: 1px solid #333; color: #fff; border-radius: 8px; }
        .btn-gold { width: 100%; padding: 14px; background: var(--gold); border: none; border-radius: 8px; font-weight: bold; cursor: pointer; color: #000; transition: 0.3s; }

        /* MENU */
        .menu-item { padding: 12px; color: #aaa; cursor: pointer; border-radius: 8px; margin-bottom: 5px; transition: 0.3s; }
        .menu-item:hover, .active { background: var(--gold); color: #000; font-weight: bold; }

        /* GRID DE DISCOS */
        .grid-musicas { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 15px; margin-top: 20px; }
        .disco { background: var(--gray); padding: 12px; border-radius: 15px; text-align: center; border: 1px solid #222; cursor: pointer; transition: 0.3s; }
        .disco:hover { border-color: var(--gold); transform: translateY(-5px); }
        .capa-disco { width: 100%; aspect-ratio: 1/1; border-radius: 50%; border: 3px solid #333; object-fit: cover; animation: rodar 10s linear infinite paused; }
        .disco:hover .capa-disco { animation-play-state: running; }
        @keyframes rodar { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* CARTEIRA */
        .wallet-box { background: linear-gradient(135deg, #111, #000); border: 1px solid var(--gold); padding: 30px; border-radius: 20px; text-align: center; margin-bottom: 20px; }
        .saldo-num { font-size: clamp(2rem, 5vw, 3rem); color: var(--gold); font-weight: 800; }

        .main-content { flex: 1; padding: 20px; width: 100%; }
        footer { background: #000; border-top: 1px solid var(--gold); padding: 30px; text-align: center; color: #666; font-size: 0.8rem; }
    </style>
</head>
<body>

<div id="authArea">
    <div class="auth-card" id="loginBox">
        <div class="logo-mam">MAM</div>
        <h2>INICIAR SESS√ÉO</h2>
        <input type="email" id="emailL" placeholder="E-mail">
        <input type="password" id="passL" placeholder="Senha">
        <button class="btn-gold" onclick="entrar()">ENTRAR AGORA</button>
        <p style="margin-top:15px; font-size:0.8rem;">Novo? <span onclick="mudar(true)" style="color:var(--gold); cursor:pointer;">Criar Conta</span></p>
    </div>
    <div class="auth-card hidden" id="regBox">
        <div class="logo-mam">MAM</div>
        <h3>REGISTO REAL</h3>
        <input type="text" id="nomeR" placeholder="Nome do Utilizador">
        <input type="email" id="emailR" placeholder="E-mail Real">
        <input type="password" id="passR" placeholder="Senha">
        <button class="btn-gold" onclick="registar()">CRIAR E RECEBER E-MAIL</button>
        <p style="margin-top:15px; font-size:0.8rem;">J√° tem conta? <span onclick="mudar(false)" style="color:var(--gold); cursor:pointer;">Login</span></p>
    </div>
</div>

<div id="appArea" class="hidden">
    <div class="mobile-nav">
        <div class="logo-mam" style="width:40px; height:40px; margin:0;">MAM</div>
        <button onclick="sair()" style="background:none; border:none; color:red; font-weight:bold;">SAIR</button>
    </div>
    <div class="wrapper">
        <aside class="sidebar">
            <div class="logo-mam">MAM</div>
            <div class="menu-item active" onclick="navTo('home')">üè† P√°gina Inicial</div>
            <div class="menu-item" onclick="navTo('perfil')">üë§ Meu Perfil</div>
            <div class="menu-item"
