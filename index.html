<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAM Distribuidora | Oficial</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <style>
        :root { --gold: #D4AF37; --dark: #050505; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
        
        body { 
            background: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.85)), url('https://images.unsplash.com/photo-1598488035139-bdbb2231ce04?auto=format&fit=crop&w=1600&q=80');
            background-size: cover; background-attachment: fixed; color: #fff; min-height: 100vh;
        }

        .hidden { display: none !important; }

        /* HEADER PROFISSIONAL */
        .header-top {
            background: rgba(0,0,0,0.95); padding: 10px 20px; border-bottom: 1px solid var(--gold);
            display: flex; align-items: center; position: sticky; top: 0; z-index: 1000;
        }
        .logo-mam-circle {
            width: 45px; height: 45px; border-radius: 50%; border: 2px solid var(--gold);
            display: flex; align-items: center; justify-content: center;
            font-weight: 900; color: var(--gold); background: #000; flex-shrink: 0;
        }
        .search-bar-center { flex: 1; display: flex; justify-content: center; }
        .search-bar-center input { 
            width: 80%; max-width: 600px; padding: 10px 20px; border-radius: 30px; 
            border: 1px solid #333; background: #111; color: #fff; outline: none; transition: 0.3s;
        }
        .search-bar-center input:focus { border-color: var(--gold); width: 90%; }

        /* LAYOUT RESPONSIVO */
        .main-wrapper { display: flex; flex-direction: column; }
        @media (min-width: 992px) {
            .main-wrapper { flex-direction: row; }
            .side-nav { width: 260px; display: block !important; position: sticky; top: 66px; height: calc(100vh - 66px); }
        }

        /* MENU LATERAL */
        .side-nav { background: rgba(0,0,0,0.98); border-right: 1px solid #222; padding: 15px; display: none; }
        .nav-link { 
            padding: 14px 18px; color: #ccc; cursor: pointer; border-radius: 10px; 
            margin-bottom: 4px; transition: 0.3s; display: flex; align-items: center; gap: 12px;
        }
        .nav-link:hover, .active-page { background: var(--gold); color: #000; font-weight: 700; }

        /* DISCOS QUE RODAM */
        .content-area { flex: 1; padding: 25px; }
        .music-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 20px; }
        .vinyl { background: rgba(20,20,20,0.7); padding: 15px; border-radius: 15px; text-align: center; border: 1px solid #333; cursor: pointer; }
        .vinyl-img { width: 100%; aspect-ratio: 1/1; border-radius: 50%; border: 4px solid #222; object-fit: cover; transition: 0.8s; }
        .vinyl:hover .vinyl-img { transform: rotate(360deg); border-color: var(--gold); }

        /* CARDS E BOT√ïES */
        .mam-card { background: rgba(15,15,15,0.95); border: 1px solid #333; padding: 25px; border-radius: 15px; margin-bottom: 25px; }
        .btn-mam { width: 100%; padding: 15px; background: var(--gold); border: none; border-radius: 10px; font-weight: bold; cursor: pointer; color: #000; }
        
        footer { background: #000; border-top: 1px solid var(--gold); padding: 30px; text-align: center; color: #666; margin-top: auto; }
    </style>
</head>
<body>

<div id="appContainer" class="hidden">
    <header class="header-top">
        <div class="logo-mam-circle">MAM</div>
        <div class="search-bar-center">
            <input type="text" placeholder="Pesquisar m√∫sicas, artistas ou marcas..." oninput="searchMAM(this.value)">
        </div>
        <button onclick="logout()" style="background:none; border:none; color:red; font-weight:bold; cursor:pointer; font-size:0.8rem;">SAIR</button>
    </header>

    <div class="main-wrapper">
        <nav class="side-nav">
            <div class="nav-link active-page" onclick="navTo('home')">üè† In√≠cio</div>
            <div class="nav-link" onclick="navTo('perfil')">üë§ Meu Perfil</div>
            <div class="nav-link" onclick="navTo('artista')">üë®‚Äçüé® Criar Artista</div>
            <div class="nav-link" onclick="navTo('lancar')">üì§ Lan√ßar M√∫sica</div>
            <div class="nav-link" onclick="navTo('minhas')">üé∂ Minhas M√∫sicas</div>
            <div class="nav-link" onclick="navTo('carteira')">üí∞ Carteira</div>
            <div class="nav-link" onclick="navTo('vip')">üíé Plano VIP</div>
            <div class="nav-link" onclick="navTo('ceo')">üëî Dire√ß√£o CEO</div>
            
            <div id="adminPanel" class="nav-link hidden" onclick="navTo('admin')" style="color:var(--gold); border:1px solid var(--gold); margin-top:15px;">üëë ADMIN</div>
        </nav>

        <main class="content-area">
            <section id="pageHome">
                <h2 id="welcomeUser" style="margin-bottom:20px; font-size:1.2rem;">Bem-vindo √† Curadoria MAM</h2>
                <div class="music-grid" id="mainGrid"></div>
            </section>

            <section id="pageCarteira" class="hidden">
                <div class="mam-card" style="text-align:center;">
                    <p style="color:#888; font-size:0.8rem;">SALDO ATUAL</p>
                    <h1 id="userBalance" style="font-size:3rem; color:var(--gold);">0,00 Kz</h1>
                </div>
            </section>

            <section id="pageCeo" class="hidden">
                <div class="mam-card">
                    <h2 style="color:var(--gold)">Dire√ß√£o CEO</h2>
                    <p style="margin:10px 0;">Matias Ars√©nio Manuel (Play Sean Ars√©nio)</p>
                    <p style="font-size:0.9rem; color:#aaa;">O nosso foco √© a cura√ß√£o que o mercado ignora. Estamos aqui para o artista real.</p>
                    <hr style="border:0; border-top:1px solid #333; margin:15px 0;">
                    <p>Contacto: <b>mamfilhos29@gmail.com</b></p>
                </div>
            </section>
        </main>
    </div>
</div>

<div id="loginArea">
    <div class="mam-card" style="max-width:400px; margin: 80px auto; text-align:center;">
        <div class="logo-mam-circle" style="width:70px; height:70px; margin:0 auto 20px;">MAM</div>
        <h2 style="color:var(--gold); margin-bottom:20px;">ACESSO PROFISSIONAL</h2>
        <input type="email" id="email" placeholder="E-mail" style="width:100%; padding:12px; margin-bottom:10px; background:#000; border:1px solid #333; color:#fff;">
        <input type="password" id="pass" placeholder="Senha" style="width:100%; padding:12px; margin-bottom:20px; background:#000; border:1px solid #333; color:#fff;">
        <button class="btn-mam" onclick="login()">ENTRAR</button>
    </div>
</div>

<footer>
    <p><b>MAM DISTRIBUIDORA</b> | Curadoria Profissional</p>
    <p style="font-size:0.7rem; margin-top:5px;">Luanda - Angola | mamfilhos29@gmail.com</p>
</footer>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyBBsZS8EpszUtikaKS8B5te8C7Q9Ow-9wo",
        authDomain: "mam-distribuidora.firebaseapp.com",
        projectId: "mam-distribuidora",
        storageBucket: "mam-distribuidora.firebasestorage.app",
        messagingSenderId: "670857002452",
        appId: "1:670857002452:web:404822b5376075e520ea41"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth(); const db = firebase.firestore();

    async function login() {
        const e = document.getElementById('email').value, p = document.getElementById('pass').value;
        try { await auth.signInWithEmailAndPassword(e, p); } catch(err) { alert("Acesso inv√°lido."); }
    }

    auth.onAuthStateChanged(user => {
        if(user) {
            document.getElementById('loginArea').classList.add('hidden');
            document.getElementById('appContainer').classList.remove('hidden');
            if(user.email === "mamfilhos24@gmail.com") document.getElementById('adminPanel').classList.remove('hidden');
            
            db.collection("users").doc(user.uid).onSnapshot(doc => {
                if(doc.exists) {
                    document.getElementById('welcomeUser').innerText = "Ol√°, " + doc.data().nome;
                    document.getElementById('userBalance').innerText = doc.data().saldo.toLocaleString() + " Kz";
                }
            });
            loadSongs();
        } else {
            document.getElementById('loginArea').classList.remove('hidden');
            document.getElementById('appContainer').classList.add('hidden');
        }
    });

    function loadSongs() {
        db.collection("musicas").onSnapshot(snap => {
            const grid = document.getElementById('mainGrid');
            grid.innerHTML = "";
            snap.forEach(doc => {
                const m = doc.data();
                grid.innerHTML += `
                <div class="vinyl" onclick="playSong('${m.audio}')">
                    <img src="${m.capa}" class="vinyl-img">
                    <p style="font-weight:bold; font-size:0.8rem; margin-top:10px;">${m.titulo}</p>
                    <p style="font-size:0.7rem; color:var(--gold);">${m.artista}</p>
                </div>`;
            });
        });
    }

    function searchMAM(val) {
        const t = val.toLowerCase();
        document.querySelectorAll('.vinyl').forEach(v => {
            v.style.display = v.innerText.toLowerCase().includes(t) ? "block" : "none";
        });
    }

    function navTo(p) {
        document.querySelectorAll('main section').forEach(s => s.classList.add('hidden'));
        document.getElementById('page' + p.charAt(0).toUpperCase() + p.slice(1)).classList.remove('hidden');
        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active-page'));
    }

    function logout() { auth.signOut().then(() => location.reload()); }
</script>
</body>
</html>
