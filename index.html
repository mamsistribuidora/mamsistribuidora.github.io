<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAM Distribuidora | Oficial</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #D4AF37; --dark: #0a0a0a; --glass: rgba(255, 255, 255, 0.03); }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; }
        
        body { 
            background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
            color: #fff; height: 100vh; overflow: hidden;
            display: flex; align-items: center; justify-content: center;
        }

        /* FUNDO TECNOLÓGICO ANIMADO */
        .bg-effect { position: fixed; inset: 0; z-index: -1; opacity: 0.4; background: url('https://www.transparenttextures.com/patterns/carbon-fibre.png'); }

        /* CONTENTOR DE ACESSO DE ELITE */
        .auth-container {
            background: var(--glass);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(212, 175, 55, 0.2);
            padding: 40px; border-radius: 30px;
            width: 100%; max-width: 420px;
            text-align: center; box-shadow: 0 25px 50px rgba(0,0,0,0.5);
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .logo-mam {
            width: 100px; height: 100px; border-radius: 50%;
            border: 2px solid var(--gold); margin-bottom: 20px;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.4);
        }

        h1 { font-family: 'Orbitron', sans-serif; color: var(--gold); font-size: 1.5rem; letter-spacing: 2px; margin-bottom: 5px; }
        p.sub { color: #888; font-size: 0.8rem; margin-bottom: 25px; }

        input {
            width: 100%; padding: 15px; margin-bottom: 15px;
            background: rgba(255,255,255,0.05); border: 1px solid #333;
            border-radius: 12px; color: #fff; transition: 0.3s;
        }

        input:focus { border-color: var(--gold); background: rgba(255,255,255,0.1); outline: none; }

        .btn-action {
            width: 100%; padding: 16px; background: var(--gold);
            color: #000; border: none; border-radius: 12px;
            font-weight: 700; cursor: pointer; text-transform: uppercase;
            letter-spacing: 1px; transition: 0.3s;
        }

        .btn-action:hover { transform: scale(1.02); box-shadow: 0 0 20px rgba(212, 175, 55, 0.5); }

        .toggle-link { margin-top: 20px; font-size: 0.85rem; color: #aaa; cursor: pointer; }
        .toggle-link span { color: var(--gold); font-weight: 600; text-decoration: underline; }

        /* RODAPÉ DE LUXO */
        footer {
            position: fixed; bottom: 20px; width: 100%; text-align: center;
            font-size: 0.7rem; color: #555; text-transform: uppercase; letter-spacing: 3px;
        }
    </style>
</head>
<body>

<div class="bg-effect"></div>

<div class="auth-container" id="boxAuth">
    <img src="https://i.ibb.co/LhqZz1L/mam-logo.jpg" class="logo-mam">
    <h1 id="title">MAM LOGIN</h1>
    <p class="sub" id="desc">Acesso restrito à Curadoria de Elite</p>

    <div id="form">
        <input type="email" id="email" placeholder="E-mail Institucional">
        <input type="password" id="pass" placeholder="Palavra-passe">
        <button class="btn-action" id="btnMain" onclick="executar()">Entrar no Painel</button>
    </div>

    <div class="toggle-link" onclick="toggleMode()">
        <p id="toggleText">Ainda não faz parte da MAM? <span>Criar Conta</span></p>
    </div>
    
    <p style="margin-top: 25px; font-size: 0.65rem; color: #444;">CEO Matias Arsénio Manuel</p>
</div>

<footer>MAM Distribuidora | Curadoria de Elite &copy; 2026</footer>

<script>
    // Firebase Config [cite: 2026-01-27]
    const cfg = { apiKey: "AIzaSyBBsZS8EpszUtikaKS8B5te8C7Q9Ow-9wo", authDomain: "mam-distribuidora.firebaseapp.com", projectId: "mam-distribuidora", storageBucket: "mam-distribuidora.appspot.com", messagingSenderId: "670857002452", appId: "1:670857002452:web:404822b5376075e520ea41" };
    firebase.initializeApp(cfg);
    const auth = firebase.auth(), db = firebase.firestore();

    let modoLogin = true;

    function toggleMode() {
        modoLogin = !modoLogin;
        document.getElementById('title').innerText = modoLogin ? "MAM LOGIN" : "REGISTO MAM";
        document.getElementById('desc').innerText = modoLogin ? "Acesso restrito à Curadoria de Elite" : "Junte-se à maior distribuidora de Angola";
        document.getElementById('btnMain').innerText = modoLogin ? "Entrar no Painel" : "Criar Minha Conta";
        document.getElementById('toggleText').innerHTML = modoLogin ? 
            "Ainda não faz parte da MAM? <span>Criar Conta</span>" : 
            "Já possui uma conta? <span>Fazer Login</span>";
    }

    async function executar() {
        const e = document.getElementById('email').value;
        const p = document.getElementById('pass').value;

        if(!e || !p) return alert("Por favor, preencha todos os campos.");

        try {
            if(modoLogin) {
                // LOGIN
                await auth.signInWithEmailAndPassword(e, p);
                // Lucro MAM por sessão
                await db.collection("lucro_mam").add({ valor: 3000, motivo: "Sessão Artista: " + e, data: new Date() });
                window.location.href = "dashboard.html"; // Redireciona para o painel
            } else {
                // REGISTO
                const res = await auth.createUserWithEmailAndPassword(e, p);
                // Inicializa Perfil do Artista com 1000 Kz
                await db.collection("users").doc(res.user.uid).set({
                    email: e, saldo: 1000, missoes: [], dataCriacao: new Date()
                });
                // Lucro MAM por nova conta
                await db.collection("lucro_mam").add({ valor: 5000, motivo: "Nova Conta: " + e, data: new Date() });
                alert("Conta criada! Bem-vindo à Família MAM.");
                window.location.href = "dashboard.html";
            }
        } catch (err) {
            alert("Erro: " + err.message);
        }
    }
</script>

</body>
</html>
