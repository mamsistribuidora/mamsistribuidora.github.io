<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAM Distribuidora | Oficial</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #D4AF37; --black: #050505; --card: rgba(10, 10, 10, 0.98); }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; }
        
        body { 
            background: #000; color: #fff; height: 100vh; overflow: hidden;
            background-image: url('https://www.transparenttextures.com/patterns/carbon-fibre.png'), radial-gradient(circle, #1a1a1a 0%, #000 100%);
        }

        .hidden { display: none !important; }

        /* LOGIN / REGISTO */
        #authArea { height: 100vh; display: flex; align-items: center; justify-content: center; z-index: 1000; position: relative; }
        .mam-box { background: var(--card); padding: 40px; border-radius: 30px; border: 2px solid var(--gold); width: 100%; max-width: 420px; text-align: center; box-shadow: 0 0 50px #000; }
        .logo-circle { width: 100px; height: 100px; border: 3px solid var(--gold); border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-weight: 800; color: var(--gold); font-size: 1.8rem; background: #000; }

        input, select, textarea { width: 100%; padding: 14px; margin: 8px 0; background: #000; border: 1px solid #333; color: #fff; border-radius: 12px; font-size: 0.9rem; }
        .btn-mam { width: 100%; padding: 16px; background: var(--gold); color: #000; border: none; border-radius: 12px; font-weight: 700; cursor: pointer; text-transform: uppercase; margin-top: 15px; transition: 0.3s; }
        .btn-mam:hover { transform: scale(1.02); box-shadow: 0 0 20px rgba(212, 175, 55, 0.4); }

        /* DASHBOARD GRID */
        #app { display: grid; grid-template-columns: 280px 1fr; height: 100vh; }
        aside { background: #000; border-right: 1px solid #1a1a1a; padding: 25px 15px; display: flex; flex-direction: column; }
        main { overflow-y: auto; padding: 40px; position: relative; background: rgba(0,0,0,0.5); padding-bottom: 120px; }

        .nav-item { padding: 12px 15px; color: #888; cursor: pointer; border-radius: 10px; margin-bottom: 5px; display: flex; align-items: center; gap: 10px; font-size: 0.85rem; transition: 0.3s; }
        .nav-item:hover, .active-nav { background: rgba(212, 175, 55, 0.1); color: var(--gold); font-weight: 600; border-left: 3px solid var(--gold); }

        /* DISCOS & M√öSICAS */
        .music-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 25px; margin-top: 20px; }
        .vinyl { background: #111; padding: 15px; border-radius: 20px; text-align: center; border: 1px solid #222; transition: 0.4s; cursor: pointer; }
        .vinyl:hover { border-color: var(--gold); transform: translateY(-10px); }
        .vinyl-img { width: 100%; aspect-ratio: 1/1; border-radius: 50%; border: 4px solid #1a1a1a; object-fit: cover; margin-bottom: 10px; }

        /* HEADER & BANNER */
        .promo-banner { background: linear-gradient(90deg, #D4AF37, #aa8a2e); color: #000; padding: 15px; border-radius: 15px; margin-bottom: 30px; font-weight: 700; text-align: center; font-size: 0.8rem; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }

        footer { position: fixed; bottom: 0; right: 0; width: calc(100% - 280px); padding: 12px; background: #000; border-top: 1px solid #1a1a1a; text-align: center; color: var(--gold); font-size: 0.7rem; letter-spacing: 2px; }
    </style>
</head>
<body>

<div id="authArea">
    <div class="mam-box">
        <div class="logo-circle">MAM</div>
        <h2 id="aTitle">INICIAR SESS√ÉO</h2>
        <input type="email" id="email" placeholder="E-mail">
        <input type="password" id="pass" placeholder="Senha">
        <input type="password" id="cPass" class="hidden" placeholder="Confirmar Senha">
        <button class="btn-mam" onclick="authMAM()" id="btnA">ENTRAR</button>
        <p onclick="toggleA()" id="tA" style="margin-top:20px; cursor:pointer; color:var(--gold); font-size:0.8rem;">Novo Artista? <b>Criar Conta</b></p>
    </div>
</div>

<div id="app" class="hidden">
    <aside>
        <div class="logo-circle" style="transform: scale(0.6); margin-bottom: 20px;">MAM</div>
        <div class="nav-item active-nav" onclick="tab('Home', this)">üè† 1* Pagina Inicial</div>
        <div class="nav-item" onclick="tab('Perfil', this)">üë§ 2* Meu Perfil</div>
        <div class="nav-item" onclick="tab('Artista', this)">üéôÔ∏è 3* Criar Artista/Produtor</div>
        <div class="nav-item" onclick="tab('Lancar', this)">üì§ 4* Lan√ßa M√∫sica</div>
        <div class="nav-item" onclick="tab('Carteira', this)">üí∞ 5* Minha Carteira</div>
        <div class="nav-item" onclick="tab('CEO', this)">üëî 6* Informa√ß√£o CEO</div>
        <div class="nav-item" style="margin-top:auto; color:#ff4d4d" onclick="sair()">üö™ 7* Terminar Sess√£o</div>
        
        <div id="admNav" class="nav-item hidden" style="color:cyan" onclick="tab('Admin', this)">‚öôÔ∏è Painel Admin</div>
    </aside>

    <main>
        <div class="promo-banner">APOIA MEUS PROJECTOS: IBAN AO06 0040 0000 7845 1010 1 (MATIAS MANUEL)</div>

        <header>
            <h2 id="welcome" style="color:var(--gold)">BEM-VINDO</h2>
            <div id="uSaldo" style="background:#111; padding:8px 25px; border-radius:30px; border:1px solid var(--gold); font-weight:700;">0,00 Kz</div>
        </header>

        <div id="pHome" class="aba">
            <h3 style="color:var(--gold); margin-bottom:15px;">M√∫sicas Distribu√≠das pela MAM</h3>
            <input type="text" placeholder="Pesquisar m√∫sica ou artista..." style="max-width:400px; margin-bottom:20px;">
            <div class="music-grid" id="fGlobal"></div>
        </div>

        <div id="pPerfil" class="aba hidden">
            <h3>üë§ Editar Perfil</h3>
            <div style="background:var(--card); padding:30px; border-radius:20px; max-width:500px;">
                <img id="uFoto" src="https://via.placeholder.com/150" style="width:100px; border-radius:50%; border:2px solid var(--gold);"><br>
                <input type="file" id="uFotoFile" accept="image/*">
                <input type="text" id="uNome" placeholder="Nome Art√≠stico">
                <textarea id="uBio" placeholder="Biografia"></textarea>
                <button class="btn-mam" onclick="atualizarPerfil()">Atualizar Dados</button>
            </div>
        </div>

        <div id="pLancar" class="aba hidden">
            <h3>üì§ Lan√ßamento Profissional</h3>
            <div style="background:var(--card); padding:30px; border-radius:20px; border:1px solid #333;">
                <label>T√≠tulo da Obra</label><input type="text" id="mTit">
                <label>Artista Principal</label><input type="text" id="mArt">
                <label>Colaborador: Princesa Heliany ft Play Sean Arsenio</label>
                <label>Carregar Capa</label><input type="file" id="mCapa" accept="image/*">
                <label>Carregar √Åudio</label><input type="file" id="mAudio" accept="audio/*">
                <label>Data de Lan√ßamento</label><input type="date" id="mData">
                <button class="btn-mam" onclick="fazerUpload()">Distribuir M√∫sica</button>
            </div>
        </div>

        <div id="pCarteira" class="aba hidden">
            <div style="background:var(--card); padding:40px; border-radius:25px; border-left:6px solid var(--gold);">
                <p>Saldo do Artista (AOA)</p>
                <h1 id="uSaldoBig" style="color:var(--gold); font-size:3.5rem;">0,00 Kz</h1>
                <p style="margin-top:20px;">Sacar para:</p>
                <select id="saqueBanco">
                    <option>BFA</option><option>BAI</option><option>BIC</option>
                    <option>Multicaixa Express</option><option>PayPal</option>
                </select>
                <input type="text" placeholder="IBAN ou E-mail da conta">
                <button class="btn-mam" onclick="alert('Saldo m√≠nimo de 10.000 Kz para saque.')">Solicitar Levantamento</button>
            </div>
        </div>

        <div id="pCEO" class="aba hidden">
            <h3 style="color:var(--gold)">Matias Ars√©nio Manuel</h3>
            <p>E-mail: mamfilhos24@gmail.com</p>
            <p>Siga no TikTok: <b>@playseanarsenio</b></p>
            <button class="btn-mam" style="width:auto; padding:10px 20px" onclick="window.open('https://tiktok.com/@playseanarsenio')">Seguir TikTok</button>
        </div>

        <div id="pAdmin" class="aba hidden">
            <h2 style="color:cyan">Cofre Administrativo MAM</h2>
            <div style="background:#111; padding:30px; border-radius:20px; border:2px solid cyan;">
                <p>LUCRO TOTAL DA EMPRESA</p>
                <h1 id="admSaldo" style="font-size:3rem; color:cyan;">0,00 Kz</h1>
            </div>
        </div>

    </main>
</div>

<footer>MAM DISTRIBUIDORA &copy; 2026 | CEO MATIAS ARS√âNIO MANUEL</footer>

<script>
    // Configura√ß√£o Firebase do Matias
    const cfg = { apiKey: "AIzaSyBBsZS8EpszUtikaKS8B5te8C7Q9Ow-9wo", authDomain: "mam-distribuidora.firebaseapp.com", projectId: "mam-distribuidora", storageBucket: "mam-distribuidora.appspot.com", messagingSenderId: "670857002452", appId: "1:670857002452:web:404822b5376075e520ea41" };
    firebase.initializeApp(cfg);
    const auth = firebase.auth(), db = firebase.firestore(), storage = firebase.storage();

    let isL = true;
    const CEO_MAIL = "mamfilhos24@gmail.com";

    function toggleA() { 
        isL = !isL; 
        document.getElementById('aTitle').innerText = isL ? "INICIAR SESS√ÉO" : "CRIAR CONTA";
        document.getElementById('cPass').classList.toggle('hidden', isL);
        document.getElementById('btnA').innerText = isL ? "ENTRAR" : "CADASTRAR";
    }

    async function authMAM() {
        const e = document.getElementById('email').value, p = document.getElementById('pass').value, cp = document.getElementById('cPass').value;
        if(!e || !p) return alert("Campos vazios!");
        try {
            if(isL) {
                await auth.signInWithEmailAndPassword(e, p);
                db.collection("lucro_mam").add({ valor: 3000, mot: "Login: "+e, data: new Date() });
            } else {
                if(p !== cp) return alert("Senhas n√£o coincidem!");
                const r = await auth.createUserWithEmailAndPassword(e, p);
                await db.collection("users").doc(r.user.uid).set({ email: e, saldo: 1000, uid: r.user.uid, nivel: "Normal" });
                db.collection("lucro_mam").add({ valor: 5000, mot: "Conta: "+e, data: new Date() });
                alert("MAM: Bem-vindo! B√≥nus de 1.000 Kz atribu√≠do.");
            }
        } catch(err) { alert(err.message); }
    }

    auth.onAuthStateChanged(u => {
        if(u) {
            document.getElementById('authArea').classList.add('hidden');
            document.getElementById('app').classList.remove('hidden');
            document.getElementById('welcome').innerText = "BOAS-VINDAS: " + u.email.split('@')[0].toUpperCase();
            
            if(u.email === CEO_MAIL) document.getElementById('admNav').classList.remove('hidden');

            db.collection("users").doc(u.uid).onSnapshot(d => {
                const s = d.data().saldo.toLocaleString() + " Kz";
                document.getElementById('uSaldo').innerText = s;
                document.getElementById('uSaldoBig').innerText = s;
            });

            db.collection("lucro_mam").onSnapshot(snap => {
                let total = 0; snap.forEach(doc => total += doc.data().valor);
                document.getElementById('admSaldo').innerText = total.toLocaleString() + " Kz";
            });

            carregarMusicas();
            setInterval(() => { alert("Siga o CEO no TikTok: Play Sean Arsenio"); }, 300000); 
        } else {
            document.getElementById('authArea').classList.remove('hidden');
            document.getElementById('app').classList.add('hidden');
        }
    });

    async function fazerUpload() {
        const tit = document.getElementById('mTit').value, art = document.getElementById('mArt').value;
        const capaFile = document.getElementById('mCapa').files[0], audioFile = document.getElementById('mAudio').files[0];

        if(!capaFile || !audioFile) return alert("Selecione os ficheiros!");
        alert("Enviando para os servidores da MAM... Por favor aguarde.");

        const cRef = storage.ref(`capas/${Date.now()}`);
        await cRef.put(capaFile);
        const cUrl = await cRef.getDownloadURL();

        await db.collection("musicas").add({
            titulo: tit, artista: art, capa: cUrl, uid: auth.currentUser.uid, data: new Date()
        });
        alert("Sucesso! M√∫sica lan√ßada.");
    }

    function carregarMusicas() {
        db.collection("musicas").onSnapshot(snap => {
            const fg = document.getElementById('fGlobal'); fg.innerHTML = "";
            snap.forEach(doc => {
                const m = doc.data();
                fg.innerHTML += `<div class="vinyl" onclick="play()"><img src="${m.capa}" class="vinyl-img"><p>${m.titulo}</p><p style="font-size:0.7rem; color:var(--gold)">${m.artista}</p></div>`;
            });
        });
    }

    function play() {
        db.collection("users").doc(auth.currentUser.uid).update({ saldo: firebase.firestore.FieldValue.increment(200) });
        db.collection("lucro_mam").add({ valor: 2000, mot: "Play", data: new Date() });
        alert("Ouvindo... Ganhos MAM processados.");
    }

    function tab(id, el) {
        document.querySelectorAll('.aba').forEach(a => a.classList.add('hidden'));
        document.getElementById('p' + id).classList.remove('hidden');
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active-nav'));
        el.classList.add('active-nav');
    }

    function sair() { auth.signOut(); }
</script>
</body>
</html>
