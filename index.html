<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAM Distribuidora | Oficial</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>

    <style>
        :root { --gold: #D4AF37; --bright: #FFD700; --dark: #050505; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; }
        body { background: #000; color: #fff; min-height: 100vh; overflow-x: hidden; }
        
        .hidden { display: none !important; }

        /* LOGOTIPO NO TOPO */
        .header-logo {
            text-align: center; padding: 20px 0;
            background: linear-gradient(to bottom, #111, #000);
            border-bottom: 1px solid var(--gold);
            position: sticky; top: 0; z-index: 1000;
        }
        .logo-circulo {
            width: 80px; height: 80px; border-radius: 50%;
            border: 3px solid var(--gold); display: inline-flex;
            align-items: center; justify-content: center;
            font-weight: 900; font-size: 1.6rem; color: var(--gold);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.4); background: #000;
        }

        /* MENU RODAP√â (7 OP√á√ïES) */
        .footer-nav {
            position: fixed; bottom: 0; width: 100%; background: #080808;
            border-top: 1px solid var(--gold); display: flex;
            justify-content: space-between; padding: 10px 5px; z-index: 9999;
        }
        .nav-item {
            text-align: center; color: #666; cursor: pointer;
            font-size: 0.55rem; flex: 1; transition: 0.3s;
        }
        .nav-item.active { color: var(--gold); font-weight: bold; }
        .nav-item i { display: block; font-size: 1.2rem; margin-bottom: 2px; }

        /* CONTE√öDO */
        main { padding: 20px; padding-bottom: 120px; }
        .auth-card {
            background: #0a0a0a; border: 1px solid #222; padding: 30px;
            border-radius: 20px; width: 90%; max-width: 380px; margin: 50px auto; text-align: center;
        }
        input, select {
            width: 100%; padding: 12px; margin: 8px 0; background: #111;
            border: 1px solid #333; color: #fff; border-radius: 10px; outline: none;
        }
        .btn-main {
            width: 100%; padding: 15px; background: var(--gold); border: none;
            border-radius: 10px; font-weight: bold; cursor: pointer; margin-top: 10px; color: #000;
        }

        .wallet-box {
            background: linear-gradient(135deg, #111, #000); border: 2px solid var(--gold);
            padding: 25px; border-radius: 20px; text-align: center;
        }
    </style>
</head>
<body>

<div class="header-logo">
    <div class="logo-circulo">MAM</div>
</div>

<div id="screenAuth">
    <div class="auth-card" id="boxLogin">
        <h3>Entrar na MAM</h3>
        <input type="email" id="lEmail" placeholder="E-mail">
        <input type="password" id="lPass" placeholder="Senha">
        <button class="btn-main" onclick="login()">ACEDER AO PAINEL</button>
        <p onclick="toggleAuth(true)" style="margin-top:15px; font-size:0.8rem; color:var(--gold); cursor:pointer;">Novo Artista? Criar Conta</p>
    </div>

    <div class="auth-card hidden" id="boxReg">
        <h3>Registo Oficial</h3>
        <input type="text" id="rNome" placeholder="Nome Art√≠stico">
        <input type="email" id="rEmail" placeholder="Teu melhor E-mail">
        <input type="password" id="rPass" placeholder="Criar Senha">
        <button class="btn-main" onclick="registrar()">FINALIZAR REGISTO</button>
        <p onclick="toggleAuth(false)" style="margin-top:15px; font-size:0.8rem; color:var(--gold); cursor:pointer;">J√° tenho conta</p>
    </div>
</div>

<div id="screenApp" class="hidden">
    <main>
        <section id="pageHome">
            <h4>üéµ Feed de Distribui√ß√£o</h4>
            <div id="feedMusicas" style="margin-top:20px; display: grid; grid-template-columns: 1fr 1fr; gap:15px;"></div>
        </section>

        <section id="pageUpload" class="hidden">
            <h4>üì§ Novo Lan√ßamento</h4>
            <input type="text" id="mTit" placeholder="T√≠tulo">
            <input type="text" id="mArt" placeholder="Artista Principal">
            <label>Capa (JPG)</label><input type="file" id="fCap" accept="image/*">
            <label>√Åudio (MP3)</label><input type="file" id="fAud" accept="audio/*">
            <button class="btn-main" onclick="uploadMusica()">ENVIAR PARA CURADORIA</button>
        </section>

        <section id="pageWallet" class="hidden">
            <div class="wallet-box">
                <small>Saldo Royalties</small>
                <h2 id="saldoKz" style="color:var(--bright); margin:10px 0;">0,00 Kz</h2>
                <button class="btn-main" style="font-size:0.7rem;">SOLICITAR LEVANTAMENTO</button>
            </div>
        </section>

        <section id="pageProfile" class="hidden">
            <h4>üë§ Perfil do Artista</h4>
            <div style="background:#111; padding:20px; border-radius:15px; margin-top:15px;">
                <p id="profNome">Nome: ...</p>
                <p id="profEmail" style="color:#666; font-size:0.8rem;">E-mail: ...</p>
                <button class="btn-main" style="background:#222; color:#fff;">EDITAR BIOGRAFIA</button>
            </div>
        </section>

        <section id="pageVip" class="hidden">
            <div style="text-align:center; padding:20px; border:2px solid #00e5ff; border-radius:20px;">
                <h3 style="color:#00e5ff;">MAM VIP MAX</h3>
                <p style="font-size:0.8rem; margin:15px 0;">Ganha 3x mais por minuto e tenha suporte priorit√°rio do CEO.</p>
                <button class="btn-main" style="background:#00e5ff;">ATIVAR VIP AGORA</button>
            </div>
        </section>

        <section id="pageCeo" class="hidden">
            <h4>üëî Dire√ß√£o Geral (Matias Arsenio)</h4>
            <div style="background:#111; padding:20px; border-radius:15px; margin-top:15px;">
                <p style="font-size:0.9rem;">Siga as diretrizes oficiais da MAM Distribuidora no TikTok.</p>
                <button class="btn-main" onclick="window.open('https://www.tiktok.com/@playseanarsenio')">TIKTOK DO CEO</button>
                <button class="btn-main" style="background:green; color:white; margin-top:10px;">WHATSAPP SUPORTE</button>
            </div>
        </section>
    </main>

    <div class="footer-nav">
        <div class="nav-item active" onclick="navTo('home')"><i>üè†</i>Home</div>
        <div class="nav-item" onclick="navTo('upload')"><i>üì§</i>Lan√ßar</div>
        <div class="nav-item" onclick="navTo('wallet')"><i>üí∞</i>Carteira</div>
        <div class="nav-item" onclick="navTo('profile')"><i>üë§</i>Perfil</div>
        <div class="nav-item" onclick="navTo('vip')"><i>üíé</i>VIP</div>
        <div class="nav-item" onclick="navTo('ceo')"><i>üëî</i>CEO</div>
        <div class="nav-item" onclick="sair()" style="color:#ff4444;"><i>üö™</i>Sair</div>
    </div>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyBBsZS8EpszUtikaKS8B5te8C7Q9Ow-9wo",
        authDomain: "mam-distribuidora.firebaseapp.com",
        projectId: "mam-distribuidora",
        storageBucket: "mam-distribuidora.firebasestorage.app",
        messagingSenderId: "670857002452",
        appId: "1:670857002452:web:404822b5376075e520ea41"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth(); const db = firebase.firestore();

    function toggleAuth(r) { document.getElementById('boxLogin').classList.toggle('hidden', r); document.getElementById('boxReg').classList.toggle('hidden', !r); }
    
    function navTo(p) {
        document.querySelectorAll('main section').forEach(s => s.classList.add('hidden'));
        document.getElementById('page' + p.charAt(0).toUpperCase() + p.slice(1)).classList.remove('hidden');
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        event.currentTarget.classList.add('active');
    }

    async function registrar() {
        const e = document.getElementById('rEmail').value; const p = document.getElementById('rPass').value;
        try {
            const res = await auth.createUserWithEmailAndPassword(e, p);
            await db.collection("users").doc(res.user.uid).set({ nome: document.getElementById('rNome').value, saldo: 0 });
            alert("Conta MAM criada!");
        } catch(err) { alert(err.message); }
    }

    async function login() {
        try { await auth.signInWithEmailAndPassword(document.getElementById('lEmail').value, document.getElementById('lPass').value); }
        catch(err) { alert(err.message); }
    }

    auth.onAuthStateChanged(user => {
        if(user) {
            document.getElementById('screenAuth').classList.add('hidden');
            document.getElementById('screenApp').classList.remove('hidden');
            db.collection("users").doc(user.uid).onSnapshot(doc => {
                const data = doc.data();
                document.getElementById('saldoKz').innerText = data.saldo.toLocaleString() + " Kz";
                document.getElementById('profNome').innerText = "Artista: " + data.nome;
                document.getElementById('profEmail').innerText = "E-mail: " + user.email;
            });
            // Ganho Autom√°tico (Smart Engine)
            setInterval(() => { db.collection("users").doc(user.uid).update({ saldo: firebase.firestore.FieldValue.increment(50) }); }, 60000);
        } else {
            document.getElementById('screenAuth').classList.remove('hidden');
            document.getElementById('screenApp').classList.add('hidden');
        }
    });

    function sair() { auth.signOut().then(() => location.reload()); }
</script>
</body>
</html>
