<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAM Distribuidora | Sistema Integrado v1.0</title>
    <style>
        :root { --dourado: #FFD700; --azul: #001f3f; --preto: #050505; --card: #121212; --texto: #e0e0e0; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--preto); color: var(--texto); margin: 0; display: flex; }
        
        /* SIDEBAR √äXODO */
        .sidebar { width: 280px; background: #000; height: 100vh; position: fixed; border-right: 1px solid var(--azul); display: none; flex-direction: column; padding: 20px; box-sizing: border-box; z-index: 1000; }
        .sidebar-logo { color: var(--dourado); font-size: 1.8em; font-weight: bold; text-align: center; margin-bottom: 25px; border-bottom: 1px solid #222; padding-bottom: 10px; }
        .nav-item { padding: 12px; border-radius: 8px; cursor: pointer; color: white; text-decoration: none; display: flex; align-items: center; gap: 12px; margin-bottom: 5px; font-size: 0.95em; transition: 0.3s; }
        .nav-item:hover, .nav-item.active { background: var(--azul); color: var(--dourado); }

        /* MAIN */
        .main { width: 100%; min-height: 100vh; transition: 0.3s; }
        .logged-main { margin-left: 280px; width: calc(100% - 280px); }
        .section { padding: 40px; display: none; animation: fadeIn 0.4s; }
        .active-section { display: block; }

        /* DISCOS (VITRINE) */
        .grid-discos { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 15px; }
        .disco { background: #111; padding: 10px; border-radius: 10px; border: 1px solid #333; text-align: center; cursor: pointer; }
        .disco img { width: 100%; border-radius: 50%; border: 2px solid var(--dourado); margin-bottom: 10px; }

        /* LOGIN / CADASTRO */
        .auth-hero { height: 100vh; display: flex; align-items: center; justify-content: center; background: #050505; width: 100%; }
        .auth-card { background: var(--card); padding: 40px; border-radius: 15px; border: 2px solid var(--azul); width: 100%; max-width: 400px; text-align: center; }
        input, select, textarea { width: 100%; padding: 12px; margin: 8px 0; background: #000; border: 1px solid #333; color: white; border-radius: 6px; }
        .btn-gold { background: var(--dourado); color: black; padding: 14px; border: none; border-radius: 8px; font-weight: bold; width: 100%; cursor: pointer; text-transform: uppercase; margin-top: 10px; }
        
        .card { background: #111; padding: 25px; border-radius: 12px; border-left: 5px solid var(--dourado); margin-bottom: 20px; }
        .hidden { display: none !important; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div id="sidebar" class="sidebar">
        <div class="sidebar-logo">MAM SYSTEM</div>
        <div class="nav-item active" onclick="showSec('home')">üè† P√°gina Inicial</div>
        <div class="nav-item" onclick="showSec('perfil')">üë§ Meu Perfil</div>
        <div class="nav-item" onclick="showSec('criar-artista')">üé§ Criar Artista/Produtor</div>
        <div class="nav-item" onclick="showSec('enviar')">üöÄ Enviar M√∫sica</div>
        <div class="nav-item" onclick="showSec('minhas-musicas')">üé∂ Minhas M√∫sicas</div>
        <div class="nav-item" onclick="showSec('carteira')">üí∞ Minha Carteira</div>
        <div class="nav-item" onclick="showSec('ceo')">üëî Informa√ß√£o CEO</div>
        <div id="adminBtn" class="nav-item" onclick="showSec('admin')" style="display:none; color: var(--dourado); font-weight: bold; border: 1px solid var(--dourado);">üõ°Ô∏è PAINEL DIRETOR</div>
        
        <div class="nav-item" onclick="logout()" style="color: #ff4444; margin-top: auto;">üö™ Terminar Sess√£o</div>
    </div>

    <div id="mainContent" class="main">
        <div id="authPage" class="auth-hero">
            <div class="auth-card">
                <h1 style="color: var(--dourado); margin: 0;">MAM</h1>
                <p style="font-size: 0.8em; color: #888; margin-bottom: 20px;">Curadoria por Matias Ars√©nio Manuel</p>
                <div id="loginForm">
                    <input type="email" id="lEmail" placeholder="Email (mamfilhos29@gmail.com)">
                    <input type="password" id="lPass" placeholder="Palavra-passe">
                    <button class="btn-gold" onclick="execLogin()">Entrar</button>
                    <p onclick="toggleAuth()" style="cursor:pointer; font-size:0.8em; margin-top:15px;">Novo aqui? <b>Cadastre-se</b></p>
                </div>
                <div id="registerForm" class="hidden">
                    <input type="text" id="rNome" placeholder="Nome Completo">
                    <input type="email" id="rEmail" placeholder="Email">
                    <input type="password" id="rPass" placeholder="Senha">
                    <button class="btn-gold" onclick="execRegisto()">Criar Conta & Confirmar</button>
                    <p onclick="toggleAuth()" style="cursor:pointer; font-size:0.8em; margin-top:15px;">J√° tem conta? <b>Login</b></p>
                </div>
            </div>
        </div>

        <div id="app" class="hidden">
            
            <div id="home" class="section active-section">
                <h2 id="welcomeMsg">Boas-vindas √† MAM</h2>
                <div class="card">
                    <h4>Apoia meus projectos</h4>
                    <p>IBAN: AO06 0000 0000 0000 0000 0 | CEO: Matias Ars√©nio Manuel</p>
                </div>
                <h3>Lan√ßamentos MAM</h3>
                <div class="grid-discos">
                    <div class="disco"><img src="https://via.placeholder.com/100" alt="capa"><br><small>F√© em Deus</small><br><small style="font-size:9px; color:var(--dourado)">P. Heliany ft Play Sean</small></div>
                </div>
            </div>

            <div id="perfil" class="section">
                <h1>Meu Perfil</h1>
                <div class="card">
                    <p><strong>Nome:</strong> <span id="perfNome">---</span></p>
                    <p><strong>N√≠vel:</strong> <span id="perfNivel">Normal</span></p>
                    <hr style="border:0; border-top:1px solid #333;">
                    <h4>Editar Informa√ß√µes</h4>
                    <input type="text" placeholder="Alterar Nome">
                    <p>Foto de Perfil: <input type="file"></p>
                    <button class="btn-gold" style="width:auto">Guardar Altera√ß√µes</button>
                </div>
            </div>

            <div id="criar-artista" class="section">
                <h1>Registro de Artista / Produtora</h1>
                <div class="card">
                    <input type="text" placeholder="Nome Art√≠stico">
                    <select><option>Artista Solo</option><option>Produtor</option><option>Produtora/Label</option></select>
                    <textarea placeholder="Biografia curta"></textarea>
                    <button class="btn-gold">Registrar Artista</button>
                </div>
            </div>

            <div id="enviar" class="section">
                <h1>Enviar Nova M√∫sica</h1>
                <div class="card">
                    <input type="text" placeholder="T√≠tulo da M√∫sica">
                    <input type="text" placeholder="Artista Principal (j√° registrado)">
                    <input type="text" placeholder="Participa√ß√µes">
                    <p>Capa do Disco: <input type="file"></p>
                    <p>Ficheiro de √Åudio: <input type="file"></p>
                    <button class="btn-gold">Enviar para Distribui√ß√£o</button>
                </div>
            </div>

            <div id="carteira" class="section">
                <h1>Minha Carteira (KZ)</h1>
                <div class="card">
                    <h3>Saldo: <span id="saldoKZ" style="color:var(--dourado)">0</span> KZ</h3>
                    <p>Convers√£o: <span id="saldoUSD">0</span> USD</p>
                    <button class="btn-gold" onclick="alert('M√≠nimo 10.000 KZ para saque.')">Solicitar Levantamento</button>
                </div>
            </div>

            <div id="admin" class="section">
                <h1 style="color:var(--dourado)">üõ°Ô∏è PAINEL DO DIRETOR (MAM)</h1>
                <div class="grid-discos" style="grid-template-columns: 1fr 1fr;">
                    <div class="card"><h4>Ganhos Totais MAM</h4><h2 id="adminGanhos">0 KZ</h2></div>
                    <div class="card"><h4>Usu√°rios Ativos</h4><h2>1</h2></div>
                </div>
            </div>

        </div>
    </div>

    <script>
        const CEO_EMAIL = "mamfilhos29@gmail.com";
        let db = JSON.parse(localStorage.getItem('mam_db')) || [];
        let session = JSON.parse(localStorage.getItem('mam_session')) || null;

        function toggleAuth() {
            document.getElementById('loginForm').classList.toggle('hidden');
            document.getElementById('registerForm').classList.toggle('hidden');
        }

        function execRegisto() {
            const nome = document.getElementById('rNome').value;
            const email = document.getElementById('rEmail').value;
            const pass = document.getElementById('rPass').value;
            if(!nome || !email) return alert("Preencha os campos!");

            alert("E-mail de confirma√ß√£o enviado para " + email);
            setTimeout(() => {
                db.push({nome, email, pass, saldo: 5000, nivel: (email === CEO_EMAIL ? 'Diretor' : 'Normal')});
                localStorage.setItem('mam_db', JSON.stringify(db));
                alert("Confirmado! Ganhou 5.000 KZ de b√≥nus.");
                toggleAuth();
            }, 1000);
        }

        function execLogin() {
            const email = document.getElementById('lEmail').value;
            const pass = document.getElementById('lPass').value;

            if(email === CEO_EMAIL) {
                session = {nome: "Matias Ars√©nio Manuel", email, saldo: 12500000, role: "ADMIN"};
            } else {
                let u = db.find(x => x.email === email && x.pass === pass);
                if(!u) return alert("Email ou senha incorretos!");
                session = u;
                session.saldo += 3000; // B√≥nus login
            }
            localStorage.setItem('mam_session', JSON.stringify(session));
            render();
        }

        function render() {
            if(!session) return;
            document.getElementById('authPage').classList.add('hidden');
            document.getElementById('app').classList.remove('hidden');
            document.getElementById('sidebar').style.display = 'flex';
            document.getElementById('mainContent').classList.add('logged-main');
            
            document.getElementById('welcomeMsg').innerText = "Ol√°, " + session.nome;
            document.getElementById('perfNome').innerText = session.nome;
            document.getElementById('saldoKZ').innerText = session.saldo.toLocaleString();
            document.getElementById('saldoUSD').innerText = (session.saldo / 910).toFixed(2);
            
            if(session.role === "ADMIN" || session.email === CEO_EMAIL) {
                document.getElementById('adminBtn').style.display = 'flex';
                document.getElementById('adminGanhos').innerText = session.saldo.toLocaleString() + " KZ";
                document.getElementById('perfNivel').innerText = "Diretor Executivo";
            }
        }

        function showSec(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active-section'));
            document.getElementById(id).classList.add('active-section');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            if(event) event.currentTarget.classList.add('active');
        }

        function logout() {
            localStorage.removeItem('mam_session');
            location.reload();
        }

        if(session)
