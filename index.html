<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAM Distribuidora | v1.0 Fix</title>
    <style>
        :root { --dourado: #FFD700; --azul: #001f3f; --preto: #050505; --card: #121212; --texto: #e0e0e0; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--preto); color: var(--texto); margin: 0; display: flex; }
        
        /* SIDEBAR */
        .sidebar { width: 280px; background: #000; height: 100vh; position: fixed; border-right: 2px solid var(--azul); display: none; flex-direction: column; padding: 20px; box-sizing: border-box; z-index: 1000; }
        .sidebar-logo { color: var(--dourado); font-size: 1.8em; font-weight: bold; text-align: center; margin-bottom: 25px; border-bottom: 1px solid #222; padding-bottom: 10px; }
        .nav-item { padding: 12px; border-radius: 8px; cursor: pointer; color: white; display: flex; align-items: center; gap: 12px; margin-bottom: 5px; transition: 0.3s; }
        .nav-item:hover, .nav-item.active { background: var(--azul); color: var(--dourado); }

        /* MAIN AREA */
        .main { width: 100%; min-height: 100vh; }
        .logged-main { margin-left: 280px; width: calc(100% - 280px); }
        .section { padding: 40px; display: none; }
        .active-section { display: block; }

        /* LOGIN / CADASTRO BOX */
        .auth-hero { height: 100vh; display: flex; align-items: center; justify-content: center; background: #050505; width: 100%; }
        .auth-card { background: var(--card); padding: 40px; border-radius: 15px; border: 2px solid var(--azul); width: 380px; text-align: center; }
        input { width: 100%; padding: 14px; margin: 10px 0; background: #000; border: 1px solid #333; color: white; border-radius: 8px; box-sizing: border-box; font-size: 1em; }
        .btn-gold { background: var(--dourado); color: black; padding: 15px; border: none; border-radius: 8px; font-weight: bold; width: 100%; cursor: pointer; text-transform: uppercase; font-size: 1em; }
        
        .card { background: #111; padding: 20px; border-radius: 12px; border-left: 5px solid var(--dourado); margin-bottom: 20px; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="sidebar" class="sidebar">
        <div class="sidebar-logo">MAM SYSTEM</div>
        <div class="nav-item active" onclick="showSec('home')">üè† In√≠cio</div>
        <div class="nav-item" onclick="showSec('perfil')">üë§ Meu Perfil</div>
        <div class="nav-item" onclick="showSec('artista')">üé§ Criar Artista</div>
        <div class="nav-item" onclick="showSec('enviar')">üöÄ Enviar M√∫sica</div>
        <div class="nav-item" onclick="showSec('carteira')">üí∞ Carteira</div>
        <div id="adminBtn" class="nav-item" onclick="showSec('admin')" style="display:none; color: var(--dourado); border: 1px solid var(--dourado); margin-top: 10px;">üõ°Ô∏è PAINEL DIRETOR</div>
        <div class="nav-item" onclick="logout()" style="color: #ff4444; margin-top: auto;">üö™ Sair</div>
    </div>

    <div id="mainContent" class="main">
        <div id="authPage" class="auth-hero">
            <div class="auth-card">
                <h1 style="color: var(--dourado); margin: 0;">MAM</h1>
                <p style="color: #888; font-size: 0.8em; margin-bottom: 20px;">Curadoria Matias Ars√©nio Manuel</p>
                
                <div id="loginForm">
                    <input type="email" id="lEmail" placeholder="Teu Email">
                    <input type="password" id="lPass" placeholder="Tua Senha">
                    <button class="btn-gold" onclick="execLogin()">Entrar</button>
                    <p style="font-size: 0.8em; margin-top: 20px;">N√£o tem conta? <span onclick="toggleAuth()" style="color:var(--dourado); cursor:pointer; font-weight:bold;">CADASTRAR</span></p>
                </div>

                <div id="registerForm" class="hidden">
                    <input type="text" id="rNome" placeholder="Nome Completo">
                    <input type="email" id="rEmail" placeholder="Email">
                    <input type="password" id="rPass" placeholder="Senha">
                    <button class="btn-gold" onclick="execRegisto()">Criar Conta Agora</button>
                    <p style="font-size: 0.8em; margin-top: 20px;">J√° tem conta? <span onclick="toggleAuth()" style="color:var(--dourado); cursor:pointer; font-weight:bold;">FAZER LOGIN</span></p>
                </div>
            </div>
        </div>

        <div id="app" class="hidden">
            <div id="home" class="section active-section">
                <h2 id="welcomeName">Ol√°!</h2>
                <div class="card">
                    <h3>Status da Conta</h3>
                    <p id="userRole">Membro MAM</p>
                    <p>Saldo: <span id="saldoKZ" style="color:var(--dourado); font-weight:bold;">0</span> KZ</p>
                </div>
            </div>

            <div id="perfil" class="section"><h1>Meu Perfil</h1><div class="card"><p>Configura√ß√µes de Matias Ars√©nio Manuel.</p></div></div>
            <div id="artista" class="section"><h1>Criar Artista</h1><div class="card"><input type="text" placeholder="Nome do Artista"></div></div>
            <div id="enviar" class="section"><h1>Enviar M√∫sica</h1><div class="card"><p>√Årea de Upload Profissional.</p></div></div>
            <div id="carteira" class="section"><h1>Carteira</h1><div class="card"><h3>Saldo Real</h3><p id="saldoFull">0 KZ</p></div></div>

            <div id="admin" class="section">
                <h1 style="color:var(--dourado)">üõ°Ô∏è PAINEL DIRETOR</h1>
                <div class="card"><h3>Controlo Geral MAM</h3><p>Ganhos da Empresa: 12.500.000 KZ</p></div>
            </div>
        </div>
    </div>

    <script>
        const CEO_EMAIL = "mamfilhos29@gmail.com";

        function toggleAuth() {
            const l = document.getElementById('loginForm');
            const r = document.getElementById('registerForm');
            l.classList.toggle('hidden');
            r.classList.toggle('hidden');
        }

        function execRegisto() {
            const nome = document.getElementById('rNome').value;
            const email = document.getElementById('rEmail').value;
            const pass = document.getElementById('rPass').value;

            if(!nome || !email || !pass) return alert("Por favor, preencha todos os campos!");

            // Salva no banco do navegador
            const usuarios = JSON.parse(localStorage.getItem('mam_db') || "[]");
            usuarios.push({nome, email, pass, saldo: 5000});
            localStorage.setItem('mam_db', JSON.stringify(usuarios));

            alert("E-mail de confirma√ß√£o enviado para: " + email + "\n\nConfirmamos o b√≥nus de 5.000 KZ!");
            toggleAuth(); // Volta para o login
        }

        function execLogin() {
            const email = document.getElementById('lEmail').value;
            const pass = document.getElementById('lPass').value;

            if(!email || !pass) return alert("Preencha o email e a senha!");

            let user = null;

            // CASO SEJA O CEO
            if(email === CEO_EMAIL) {
                user = {nome: "Matias Ars√©nio Manuel", email: email, saldo: 12500000, role: "ADMIN"};
            } else {
                // PROCURA USU√ÅRIO NORMAL
                const usuarios = JSON.parse(localStorage.getItem('mam_db') || "[]");
                user = usuarios.find(u => u.email === email && u.pass === pass);
                if(user) user.saldo += 3000; // B√≥nus login
            }

            if(user) {
                localStorage.setItem('mam_session', JSON.stringify(user));
                render();
            } else {
                alert("Email ou Senha incorretos!");
            }
        }

        function render() {
            const session = JSON.parse(localStorage.getItem('mam_session'));
            if(!session) return;

            document.getElementById('authPage').classList.add('hidden');
            document.getElementById('app').classList.remove('hidden');
            document.getElementById('sidebar').style.display = 'flex';
            document.getElementById('mainContent').classList.add('logged-main');

            document.getElementById('welcomeName').innerText = "Boas-vindas, " + session.nome;
            document.getElementById('saldoKZ').innerText = session.saldo.toLocaleString();
            document.getElementById('saldoFull').innerText = session.saldo.toLocaleString() + " KZ";
            document.getElementById('userRole').innerText = session.role === "ADMIN" ? "Diretor Executivo" : "Artista Oficial";

            if(session.role === "ADMIN") {
                document.getElementById('adminBtn').style.display = 'flex';
            }
        }

        function showSec(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active-section'));
            document.getElementById(id).classList.add('active-section');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        }

        function logout() {
            localStorage.removeItem('mam_session');
            location.reload();
        }

        // Verifica se j√° est√° logado ao abrir o site
        if(localStorage.getItem('mam_session')) {
            render();
        }
    </script>
</body>
</html>
