<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAM Distribuidora | Music Industry</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #D4AF37; --blue: #00BFFF; --card: rgba(12, 12, 12, 0.98); }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; }
        
        body { 
            background: #000; color: #fff; height: 100vh; overflow: hidden;
            background-image: url('https://www.transparenttextures.com/patterns/carbon-fibre.png'), radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
            background-attachment: fixed;
        }

        .hidden { display: none !important; }

        /* LAYOUT */
        #app { display: grid; grid-template-columns: 280px 1fr; height: 100vh; }
        aside { background: rgba(0,0,0,0.98); border-right: 1px solid #222; padding: 30px 15px; display: flex; flex-direction: column; z-index: 10; }
        main { overflow-y: auto; padding: 30px; padding-bottom: 100px; position: relative; }

        .nav-item { padding: 14px 18px; color: #777; cursor: pointer; border-radius: 12px; margin-bottom: 6px; display: flex; align-items: center; gap: 12px; transition: 0.3s; font-size: 0.9rem; }
        .nav-item:hover, .active-nav { background: rgba(212, 175, 55, 0.1); color: var(--gold); font-weight: 600; }
        .btn-sair { margin-top: auto; color: #ff4d4d; border: 1px solid rgba(255,77,77,0.3); padding: 12px; border-radius: 10px; text-align: center; cursor: pointer; font-size: 0.8rem; }

        /* CARDS E INPUTS */
        .mam-card { background: var(--card); border: 1px solid #222; padding: 25px; border-radius: 20px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        input, select, textarea { width: 100%; padding: 12px; margin: 8px 0; background: #050505; border: 1px solid #333; color: #fff; border-radius: 10px; outline: none; }
        input:focus { border-color: var(--gold); }
        .btn-gold { width: 100%; padding: 16px; background: var(--gold); color: #000; border: none; border-radius: 12px; font-weight: 800; cursor: pointer; text-transform: uppercase; transition: 0.3s; }
        .btn-gold:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3); }

        /* PERFIL ESTILO HQ */
        .profile-header { text-align: center; margin-bottom: 30px; position: relative; }
        .profile-img { width: 130px; height: 130px; border-radius: 50%; border: 3px solid var(--gold); object-fit: cover; background: #111; margin-bottom: 15px; }
        .verified-badge { color: var(--blue); font-size: 1.2rem; }

        footer { position: fixed; bottom: 0; right: 0; width: calc(100% - 280px); padding: 15px; background: #000; border-top: 1px solid #1a1a1a; text-align: center; color: var(--gold); font-size: 0.7rem; letter-spacing: 2px; }
    </style>
</head>
<body>

<div id="authArea" style="height:100vh; display:flex; align-items:center; justify-content:center;">
    <div class="mam-card" style="width:100%; max-width:400px; text-align:center; border: 1px solid var(--gold);">
        <div style="font-size: 2rem; font-weight: 900; color: var(--gold); margin-bottom: 10px;">MAM</div>
        <p style="color: #666; font-size: 0.8rem; margin-bottom: 20px;">DISTRIBUIDORA DIGITAL</p>
        <input type="email" id="email" placeholder="Email do Artista">
        <input type="password" id="pass" placeholder="Senha">
        <button class="btn-gold" onclick="authMAM()">ACESSAR HQ</button>
    </div>
</div>

<div id="app" class="hidden">
    <aside>
        <div style="font-size: 1.5rem; font-weight: 900; color: var(--gold); text-align: center; margin-bottom: 30px;">MAM</div>
        <div class="nav-item active-nav" onclick="tab('Home', this)">üè† Pagina Inicial</div>
        <div class="nav-item" onclick="tab('Perfil', this)">üë§ Meu Perfil</div>
        <div class="nav-item" onclick="tab('Lancar', this)">üì§ Lan√ßa M√∫sica</div>
        <div class="nav-item" onclick="tab('Minhas', this)">üé∂ Minhas M√∫sicas</div>
        <div class="nav-item" onclick="tab('Cart', this)">üí∞ Minha Carteira</div>
        <div class="nav-item" onclick="tab('Chat', this)">üí¨ Suporte CEO</div>
        <div class="nav-item hidden" id="navAdmin" onclick="tab('Admin', this)">‚öôÔ∏è Administra√ß√£o HQ</div>
        <div class="btn-sair" onclick="sair()">ENCERRAR SESS√ÉO</div>
    </aside>

    <main>
        <div id="pPerfil" class="aba hidden">
            <div class="profile-header">
                <img id="uFoto" src="https://via.placeholder.com/150" class="profile-img">
                <h2 id="uNomeArt">Nome do Artista</h2>
                <p id="uStatus" style="color:var(--gold); font-size:0.8rem;">Status: Artista Independente</p>
            </div>
            <div class="mam-card">
                <h3>‚öôÔ∏è Editar Perfil Profissional</h3>
                <label>Foto de Perfil (Ficheiro)</label>
                <input type="file" id="uFile" accept="image/*">
                <label>Nome Art√≠stico Oficial</label>
                <input type="text" id="uInNome" placeholder="Ex: Play Sean Arsenio">
                <label>Biografia / Hist√≥ria</label>
                <textarea id="uInBio" rows="4" placeholder="Escreve sobre a tua carreira musical..."></textarea>
                <button class="btn-gold" onclick="salvarPerfil()">ATUALIZAR DADOS</button>
            </div>
        </div>

        <div id="pHome" class="aba">
            <h2 style="color:var(--gold); margin-bottom:20px;">CENTRAL DE COMANDO</h2>
            <div class="mam-card" style="text-align:center;">
                <p style="color:#888;">TAREFA DE RECOMPENSA</p>
                <div id="timerDisplay" style="font-size:3rem; font-weight:800; color:var(--gold); margin:10px;">30s</div>
                <button class="btn-gold" style="width:200px;" onclick="iniciarTarefa()">INICIAR V√çDEO</button>
            </div>
            <div class="mam-card" style="border-color:var(--blue);">
                <h3 style="color:var(--blue)">CONVIDAR ARTISTAS</h3>
                <p style="font-size:0.8rem; margin:10px 0;">Copia o teu link e ganha 500 Kz por cada novo registo.</p>
                <input type="text" readonly id="linkRef" style="color:var(--blue);">
                <button class="btn-gold" style="background:var(--blue); color:#fff;" onclick="copiarLink()">COPIAR MEU LINK</button>
            </div>
        </div>

        <div id="pLancar" class="aba hidden">
            <div class="mam-card">
                <h3>üì§ DISTRIBUI√á√ÉO MANUAL</h3>
                <label>T√≠tulo da Obra</label><input type="text" id="mTit">
                <label>
