<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAM Distribuidora | Dashboard Oficial</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>

    <style>
        :root { --gold: #D4AF37; --bg: #050505; --card: #111; --text: #eee; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
        
        body { 
            background: linear-gradient(rgba(0,0,0,0.9), rgba(0,0,0,0.9)), 
            url('https://images.unsplash.com/photo-1598488035139-bdbb2231ce04?q=80&w=1600');
            background-size: cover; background-attachment: fixed; color: var(--text); min-height: 100vh;
        }

        .hidden { display: none !important; }

        /* HEADER & LOGO */
        .header-top { display: flex; justify-content: space-between; align-items: center; padding: 15px 5%; background: rgba(0,0,0,0.8); border-bottom: 2px solid var(--gold); position: sticky; top: 0; z-index: 1000; }
        .logo-circle { width: 60px; height: 60px; border-radius: 50%; border: 2px solid var(--gold); display: flex; align-items: center; justify-content: center; font-weight: 900; color: var(--gold); background: #000; cursor: pointer; }

        /* AUTH CARD */
        .auth-container { display: flex; justify-content: center; align-items: center; padding: 50px 20px; }
        .auth-card { background: rgba(15,15,15,0.98); border: 1px solid var(--gold); padding: 40px; border-radius: 20px; width: 100%; max-width: 420px; text-align: center; }
        input, select, textarea { width: 100%; padding: 12px; margin: 10px 0; background: #000; border: 1px solid #333; color: #fff; border-radius: 8px; }
        .btn-gold { width: 100%; padding: 15px; background: var(--gold); border: none; border-radius: 8px; font-weight: bold; cursor: pointer; color: #000; margin-top: 10px; }

        /* MAIN LAYOUT */
        .wrapper { display: flex; min-height: 90vh; }
        .sidebar { width: 280px; background: rgba(10,10,10,0.95); border-right: 1px solid #222; padding: 25px; }
        .menu-item { padding: 14px; color: #aaa; cursor: pointer; display: block; text-decoration: none; border-radius: 10px; margin-bottom: 8px; font-size: 0.9rem; transition: 0.2s; }
        .menu-item:hover, .menu-item.active { background: var(--gold); color: #000; font-weight: bold; }

        .main-content { flex: 1; padding: 30px; padding-bottom: 100px; }
        
        /* GRID DE DISCOS */
        .grid-discos { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 20px; }
        .disco { background: var(--card); padding: 15px; border-radius: 15px; border: 1px solid #222; text-align: center; cursor: pointer; transition: 0.3s; }
        .disco:hover { border-color: var(--gold); transform: scale(1.05); }
        .disco img { width: 100%; aspect-ratio: 1/1; border-radius: 10px; object-fit: cover; }

        /* CARTEIRA */
        .wallet-card { background: linear-gradient(145deg, #1a1a1a, #000); border: 2px solid var(--gold); padding: 30px; border-radius: 20px; text-align: center; margin-bottom: 30px; }
        .balance-big { font-size: 3rem; color: var(--gold); font-weight: bold; }

        /* FOOTER INFO */
        footer { background: #000; border-top: 1px solid #222; padding: 40px 5%; color: #666; font-size: 0.8rem; text-align: center; margin-top: auto; }
        
        /* PESQUISA */
        .search-box { background: #111; border: 1px solid #333; padding: 10px 20px; border-radius: 25px; color: #fff; width: 300px; }
    </style>
</head>
<body>

<header class="header-top">
    <div class="logo-circle" onclick="location.reload()">MAM</div>
    <input type="text" class="search-box" id="globalSearch" placeholder="Pesquisar m√∫sica ou artista...">
    <div id="userLabel" style="font-size: 0.8rem; color: var(--gold);"></div>
</header>

<div id="authArea" class="auth-container">
    <div class="auth-card" id="loginBox">
        <h2 style="color:var(--gold); margin-bottom:20px;">Iniciar Sess√£o</h2>
        <input type="email" id="emailL" placeholder="E-mail">
        <input type="password" id="passL" placeholder="Senha">
        <button class="btn-gold" id="btnLogar">ENTRAR NA MAM</button>
        <p style="margin-top:20px; font-size:0.8rem;">Novo artista? <span id="toReg" style="color:var(--gold); cursor:pointer;">Criar Conta Profissional</span></p>
    </div>

    <div class="auth-card hidden" id="regBox">
        <h2 style="color:var(--gold); margin-bottom:20px;">Registo de Distribui√ß√£o</h2>
        <input type="text" id="nomeR" placeholder="Nome Art√≠stico/Produtora">
        <input type="email" id="emailR" placeholder="Teu E-mail">
        <input type="password" id="passR" placeholder="Crie uma Senha">
        <button class="btn-gold" id="btnRegistar">CRIAR MINHA CONTA</button>
        <p style="margin-top:20px; font-size:0.8rem;">J√° tens conta? <span id="toLog" style="color:var(--gold); cursor:pointer;">Fazer Login</span></p>
    </div>
</div>

<div id="appArea" class="wrapper hidden">
    <aside class="sidebar">
        <div class="menu-item active" onclick="navTo('home')">üè† P√°gina Inicial</div>
        <div class="menu-item" onclick="navTo('perfil')">üë§ Meu Perfil</div>
        <div class="menu-item" onclick="navTo('registrarArtista')">üé® Criar Artista/Produtor</div>
        <div class="menu-item" onclick="navTo('lancar')">üì§ Lan√ßar M√∫sica</div>
        <div class="menu-item" onclick="navTo('minhasMusicas')">üéµ Minhas M√∫sicas</div>
        <div class="menu-item" onclick="navTo('carteira')">üí∞ Minha Carteira</div>
        <div class="menu-item" onclick="navTo('ceo')">üëî Informa√ß√£o CEO</div>
        <div class="menu-item" style="color:#ff4444; margin-top:20px;" onclick="sair()">üö™ Terminar Sess√£o</div>
    </aside>

    <main class="main-content">
        <section id="pageHome">
            <div id="boasVindas" style="
